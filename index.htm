<?php
	include '../base/lc_header.php';
	include '../base/lc_util.php';
?>

<!--------------------------- Body Begin ---------------------------------------->

<div class="Section1">

<br>
<h1>◈카메라◈</h1>
<br>

<p class=MsoNormal><span lang=EN-US style='font-size:16.0pt'>1. </span><span style='font-size:16.0pt'>카메라 기초</span></p>
<br>
<p class=MsoNormal><span style=''>정점은 월드 변환<span lang=EN-US>(World
Transform), 뷰 변환(View Transform), 정규 변환(Normalization Transform, 투영 변환:
Projection Transform), 뷰포트(Viewport) 변환을 거처 2D 픽셀로 바뀌게 됩니다. 카메라를 만드는 것은 정점의 뷰 변환과
투영 변환의 행렬을 만드는 것입니다. 카메라를 클래스를 만들고, 카메라 클래스의 인스턴스(Instance: 객체)가 원하는 대로 동작을 하는 지
테스트 하기 위해서 먼저 키보드와 마우스에 대한 Input Class, 그리고 화면에서의 위치를 적당히 표현하는 XYZ 축에 대한 그리드(Grid)
가 필요합니다. 다음의 압축 파일은 게임 카메라를 만들기 위해서 인풋과 그리드가 포함되어 있는 코드 입니다.</span></span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span><a
href="https://github.com/3dapi/ef01_camera/raw/master/cam00_basic.zip">cam00_basic.zip</a></span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:14.0pt;'>1.1.
카메라 클래스</span></p>

<p class=MsoNormal><span style=''>카메라 클래스에서 가장 중요한 멤버 변수는 뷰 변환에 대한
뷰 행렬<span lang=EN-US>, 투영 변환에 대한 투영 행렬입니다. 카메라 클래스는 화면과 카메라에 대한 정보를 입력 받아 이 둘의 행렬을
만드는 것이 주 임무라 하겠습니다.</span></span></p>

<p class=MsoNormal><span style=''>뷰 행렬을 만들기 위해서 카메라의 위치<span
lang=EN-US>(Eye vector), 카메라가 보고 있는 지점(Look Vector), 그리고 카메라의 업 벡터(Up Vector)가 필요한데
이들의 멤버 변수와 카메라를 생성하는데 필요한 Create() 함수, 카메라의 뷰 행렬과 투영 행렬을 갱신하는 FrameMove() 함수를 기본으로
하는 클래스를 다음과 같이 작성합니다.</span></span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:blue'>class</span><span lang=EN-US
style=';color:black'> </span><span lang=EN-US style='color:blue'>CMcCamera</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>{</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:blue'>protected</span><span lang=EN-US
style=';color:black'>:</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:blue'>LPDIRECT3DDEVICE9</span><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>m_pDev</span><span lang=EN-US
style=';color:black'>;</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>&nbsp;</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:blue'>D3DXMATRIX</span><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>m_mtViw</span><span lang=EN-US
style=';color:black'>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:green'>// View Matrix</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:blue'>D3DXMATRIX</span><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>m_mtPrj</span><span lang=EN-US
style=';color:black'>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:green'>// Projection Matrix</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>&nbsp;</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:blue'>D3DXVECTOR3</span><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>m_vcEye</span><span lang=EN-US
style=';color:black'>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:green'>// Camera position</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:blue'>D3DXVECTOR3</span><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>m_vcLook</span><span lang=EN-US
style=';color:black'>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:green'>// Look vector</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:blue'>D3DXVECTOR3</span><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>m_vcUp</span><span lang=EN-US
style=';color:black'>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:green'>// up vector</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>&nbsp;</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:blue'>public</span><span lang=EN-US
style=';color:black'>:</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:blue'>CMcCamera</span><span lang=EN-US
style=';color:black'>();</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:blue'>virtual</span><span lang=EN-US
style=';color:black'> ~</span><span lang=EN-US style='color:blue'>CMcCamera</span><span lang=EN-US style=';
color:black'>();</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>&nbsp;</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:blue'>INT</span><span lang=EN-US
style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:#880000'>Create</span><span lang=EN-US
style=';color:black'>(</span><span lang=EN-US style='color:blue'>LPDIRECT3DDEVICE9</span><span lang=EN-US style='color:black'> </span><span lang=EN-US style=';color:gray'>pDev</span><span
lang=EN-US style=';color:black'>);</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:blue'>INT</span><span lang=EN-US
style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:#880000'>FrameMove</span><span
lang=EN-US style=';color:black'>();</span></p>

<p class=MsoNormal><span lang=EN-US style=';color:black'>};</span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:blue'>CMcCamera</span><span lang=EN-US
style=';color:black'>::</span><span lang=EN-US style='color:blue'>CMcCamera</span><span lang=EN-US style=';
color:black'>()</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>{</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>m_pDev</span><span lang=EN-US
style=';color:black'> = </span><span lang=EN-US
style=';color:#A000A0'>NULL</span><span lang=EN-US
style=';color:black'>;</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>}</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>&nbsp;</span></p>

<p class=MsoNormal style='word-break:keep-all'><span style=';
color:black'>카메라의 생성과 초기화를 담당하는<span lang=EN-US> CMcCamera::Create() 함수에서 카메라의
Eye, Look, Up 벡터를 초기화 합니다.</span></span></p>

<p class=MsoNormal style='word-break:keep-all'><span style=';
color:black'>투영 행렬은 게임에서 카메라 액션 등을 처리할 때 자주 바꾸지만 우리는 카메라의 기초 강의가 끝날 때까지 투영 행렬은 변함이
없다고 생각하고 다음과 같이<span lang=EN-US> DirectX SDK에서 지원하는
D3DXMatrixPerspectiveFovLH() 함수를 통해서 먼저 투영 행렬을 만듭니다. 투영 행렬은 이후 강의에서 만드는 과정을 다시 설명할
것입니다.</span></span></p>

<p class=MsoNormal style='word-break:keep-all'><span style=';
color:black'>참고로 <span lang=EN-US>D3DXMatrixPerspectiveFovLH() 함수는 왼손 좌표계(LH:
Left Hand Coordinate System), 투시 투영(Perspective), 시야 각(FOV: Field Of View), </span></span><span
style=''>화면 종횡 비<span lang=EN-US>(Aspect Ratio: Screen Width/
Screen Height), 가상 화면의 근거리(가까운 면: Near), 가상 화면의 원거리(Far)</span></span><span
style=';color:black'>을 인수로 하는 투영 행렬을 만드는 함수 입니다<span lang=EN-US>.
다음 코드에서는 시야 각 </span></span><span>45도(π/4.f),
종횡 비(800.f/600.f), Near(1.f), Far(5000.f)를 인수로 해서 투영 행렬을 만들었습니다.</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>&nbsp;</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:blue'>INT</span><span lang=EN-US style='color:black'> </span><span lang=EN-US style=';color:blue'>CMcCamera</span><span
lang=EN-US style=';color:black'>::</span><span lang=EN-US
style=';color:#880000'>Create</span><span lang=EN-US
style=';color:black'>(</span><span lang=EN-US style='color:blue'>LPDIRECT3DDEVICE9</span><span lang=EN-US style='color:black'> </span><span lang=EN-US style=';color:gray'>pDev</span><span
lang=EN-US style=';color:black'>)</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>{</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>m_pDev</span><span lang=EN-US
style=';color:black'> = </span><span lang=EN-US
style=';color:gray'>pDev</span><span lang=EN-US
style=';color:black'>;</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>m_vcEye</span><span lang=EN-US
style=';color:black'> = </span><span lang=EN-US
style=';color:blue'>D3DXVECTOR3</span><span lang=EN-US
style=';color:black'>(</span><span lang=EN-US style='color:red'>10</span><span lang=EN-US style=';color:black'>,</span><span
lang=EN-US style=';color:red'>10</span><span lang=EN-US
style=';color:black'>,-</span><span lang=EN-US style='color:red'>10</span><span lang=EN-US style=';color:black'>);</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>m_vcLook</span><span lang=EN-US
style=';color:black'>= </span><span lang=EN-US style='color:blue'>D3DXVECTOR3</span><span lang=EN-US style=';
color:black'>(</span><span lang=EN-US style=';color:red'>0</span><span
lang=EN-US style=';color:black'>,</span><span lang=EN-US
style=';color:red'>0</span><span lang=EN-US style='color:black'>,</span><span lang=EN-US style=';color:red'>0</span><span
lang=EN-US style=';color:black'>);</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>m_vcUp</span><span lang=EN-US
style=';color:black'>&nbsp; = </span><span lang=EN-US
style=';color:blue'>D3DXVECTOR3</span><span lang=EN-US
style=';color:black'>(</span><span lang=EN-US style='color:red'>0</span><span lang=EN-US style=';color:black'>,</span><span
lang=EN-US style=';color:red'>1</span><span lang=EN-US
style=';color:black'>,</span><span lang=EN-US style='color:red'>0</span><span lang=EN-US style=';color:black'>);</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>&nbsp;</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:#880000'>D3DXMatrixPerspectiveFovLH</span><span
lang=EN-US style=';color:black'>(&amp;</span><span lang=EN-US
style=';color:gray'>m_mtPrj</span><span lang=EN-US
style=';color:black'>,</span><span lang=EN-US style='color:#A000A0'>D3DX_PI</span><span lang=EN-US style=';
color:black'>/</span><span lang=EN-US style=';color:red'>4.f</span><span
lang=EN-US style=';color:black'>, </span><span lang=EN-US
style=';color:red'>800.f</span><span lang=EN-US
style=';color:black'>/</span><span lang=EN-US style='color:red'>600.f</span><span lang=EN-US style=';color:black'>,
</span><span lang=EN-US style=';color:red'>1.f</span><span
lang=EN-US style=';color:black'>, </span><span lang=EN-US
style=';color:red'>5000.f</span><span lang=EN-US
style=';color:black'>);</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>&nbsp;</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:blue'>return</span><span lang=EN-US
style=';color:black'> </span><span lang=EN-US style='color:red'>0</span><span lang=EN-US style=';color:black'>;</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>}</span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span style=''>카메라의 갱신을 담당하는<span lang=EN-US>
FrameMove() 함수에서는 카메라의 위치(Eye), 또는 Look 벡터가 달라지면 이들 값을 갱신하고 뷰 행렬을 만들어 냅니다.</span></span></p>

<p class=MsoNormal><span style=''>다음 코드는 먼저 카메라 객체가 동작을 하고 있는지<span
lang=EN-US> Left, Light, Up, Down 키로 테스트 할 수 있도록 작성했습니다. 또한 뷰 행렬을 만들기 위해서 D3DXMatrixLookAtLH()
함수를 이용했고, 이 함수를 만드는 방법은 이후 강의에서 다시 설명하겠습니다.</span></span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>&nbsp;</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:blue'>INT</span><span lang=EN-US style='color:black'> </span><span lang=EN-US style=';color:blue'>CMcCamera</span><span
lang=EN-US style=';color:black'>::</span><span lang=EN-US
style=';color:#880000'>FrameMove</span><span lang=EN-US
style=';color:black'>()</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>{</span></p>

<p class=MsoNormal style='text-indent:40.0pt;word-break:keep-all'><span
lang=EN-US style=';color:blue'>if</span><span lang=EN-US
style=';color:black'>(</span><span lang=EN-US style='color:gray'>g_pApp</span><span lang=EN-US style=';
color:black'>-&gt;</span><span lang=EN-US style=';color:gray'>m_pInput</span><span
lang=EN-US style=';color:black'>-&gt;</span><span lang=EN-US
style=';color:#880000'>KeyState</span><span lang=EN-US
style=';color:black'>(</span><span lang=EN-US style='color:#A000A0'>VK_RIGHT</span><span lang=EN-US style=';
color:black'>))</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>m_vcEye</span><span lang=EN-US
style=';color:black'>.</span><span lang=EN-US style='color:gray'>x</span><span lang=EN-US style=';color:black'>
+= </span><span lang=EN-US style=';color:red'>1.f</span><span
lang=EN-US style=';color:black'>;</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>&nbsp;</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:blue'>if</span><span lang=EN-US
style=';color:black'>(</span><span lang=EN-US style='color:gray'>g_pApp</span><span lang=EN-US style=';
color:black'>-&gt;</span><span lang=EN-US style=';color:gray'>m_pInput</span><span
lang=EN-US style=';color:black'>-&gt;</span><span lang=EN-US
style=';color:#880000'>KeyState</span><span lang=EN-US
style=';color:black'>(</span><span lang=EN-US style='color:#A000A0'>VK_LEFT</span><span lang=EN-US style=';
color:black'>))</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>m_vcEye</span><span lang=EN-US
style=';color:black'>.</span><span lang=EN-US style='color:gray'>x</span><span lang=EN-US style=';color:black'>
-= </span><span lang=EN-US style=';color:red'>1.f</span><span
lang=EN-US style=';color:black'>;</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>&nbsp;</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:blue'>if</span><span lang=EN-US
style=';color:black'>(</span><span lang=EN-US style='color:gray'>g_pApp</span><span lang=EN-US style=';
color:black'>-&gt;</span><span lang=EN-US style=';color:gray'>m_pInput</span><span
lang=EN-US style=';color:black'>-&gt;</span><span lang=EN-US
style=';color:#880000'>KeyState</span><span lang=EN-US
style=';color:black'>(</span><span lang=EN-US style='color:#A000A0'>VK_UP</span><span lang=EN-US style=';
color:black'>))</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>m_vcEye</span><span lang=EN-US
style=';color:black'>.</span><span lang=EN-US style='color:gray'>y</span><span lang=EN-US style=';color:black'>
+= </span><span lang=EN-US style=';color:red'>1.f</span><span
lang=EN-US style=';color:black'>;</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>&nbsp;</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:blue'>if</span><span lang=EN-US
style=';color:black'>(</span><span lang=EN-US style='color:gray'>g_pApp</span><span lang=EN-US style=';
color:black'>-&gt;</span><span lang=EN-US style=';color:gray'>m_pInput</span><span
lang=EN-US style=';color:black'>-&gt;</span><span lang=EN-US
style=';color:#880000'>KeyState</span><span lang=EN-US
style=';color:black'>(</span><span lang=EN-US style='color:#A000A0'>VK_DOWN</span><span lang=EN-US style=';
color:black'>))</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>m_vcEye</span><span lang=EN-US
style=';color:black'>.</span><span lang=EN-US style='color:gray'>y</span><span lang=EN-US style=';color:black'>
-= </span><span lang=EN-US style=';color:red'>1.f</span><span
lang=EN-US style=';color:black'>;</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>&nbsp;</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:#880000'>D3DXMatrixLookAtLH</span><span
lang=EN-US style=';color:black'>(&amp;</span><span lang=EN-US
style=';color:gray'>m_mtViw</span><span lang=EN-US
style=';color:black'>, &amp;</span><span lang=EN-US
style=';color:gray'>m_vcEye</span><span lang=EN-US
style=';color:black'>, &amp;</span><span lang=EN-US
style=';color:gray'>m_vcLook</span><span lang=EN-US
style=';color:black'>, &amp;</span><span lang=EN-US
style=';color:gray'>m_vcUp</span><span lang=EN-US
style=';color:black'>);</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>&nbsp;</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>g_pApp</span><span lang=EN-US
style=';color:black'>-&gt;</span><span lang=EN-US
style=';color:gray'>m_pd3dDevice</span><span lang=EN-US
style=';color:black'>-&gt;</span><span lang=EN-US
style=';color:#880000'>SetTransform</span><span lang=EN-US
style=';color:black'>(</span><span lang=EN-US style='color:#A000A0'>D3DTS_VIEW</span><span lang=EN-US style=';
color:black'>, &amp;</span><span lang=EN-US style=';color:gray'>m_mtViw</span><span
lang=EN-US style=';color:black'>);</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>g_pApp</span><span lang=EN-US
style=';color:black'>-&gt;</span><span lang=EN-US
style=';color:gray'>m_pd3dDevice</span><span lang=EN-US
style=';color:black'>-&gt;</span><span lang=EN-US
style=';color:#880000'>SetTransform</span><span lang=EN-US
style=';color:black'>(</span><span lang=EN-US style='color:#A000A0'>D3DTS_PROJECTION</span><span lang=EN-US style='color:black'>, &amp;</span><span lang=EN-US style=';
color:gray'>m_mtPrj</span><span lang=EN-US style=';color:black'>);</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>&nbsp;</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:blue'>return</span><span lang=EN-US
style=';color:black'> </span><span lang=EN-US style='color:red'>0</span><span lang=EN-US style=';color:black'>;</span></p>

<p class=MsoNormal><span lang=EN-US style=';color:black'>}</span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span style=''>카메라 객체를<span lang=EN-US> CMain
클래스에서 선언한 다음 SAFE_CREATE1 이라는 매크로를 이용해서 생성합니다. SAVE_NEWCREATE1 매크로에 대한 내용은 코드를 살펴
보기 바랍니다.</span></span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:blue'>class</span><span lang=EN-US
style=';color:black'> </span><span lang=EN-US style='color:blue'>CMain</span><span lang=EN-US style=';color:black'>
: </span><span lang=EN-US style=';color:blue'>public</span><span
lang=EN-US style=';color:black'> </span><span lang=EN-US
style=';color:blue'>CD3DApplication</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>{</span></p>

<p class=MsoNormal style='text-indent:40.0pt;word-break:keep-all'><span
lang=EN-US style=';color:black'>…</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:blue'>CMcCamera</span><span lang=EN-US
style=';color:black'>*&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>m_pCam</span><span lang=EN-US
style=';color:black'>&nbsp; ;</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; …</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>};</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>&nbsp;</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:blue'>HRESULT</span><span lang=EN-US
style=';color:black'> </span><span lang=EN-US style='color:blue'>CMain</span><span lang=EN-US style=';color:black'>::</span><span
lang=EN-US style=';color:#880000'>Init</span><span lang=EN-US
style=';color:black'>()</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>{</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; …</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:#A000A0'>SAFE_NEWCREATE1</span><span
lang=EN-US style=';color:black'>(</span><span lang=EN-US
style=';color:gray'>m_pCam</span><span lang=EN-US
style=';color:black'>, </span><span lang=EN-US style='color:blue'>CMcCamera</span><span lang=EN-US style=';
color:black'>, </span><span lang=EN-US style=';color:gray'>m_pd3dDevice</span><span
lang=EN-US style=';color:black'>);</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; …</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>}</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>&nbsp;</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>CMain 클래스의 FrameMove() 함수 안에서 카메라 객체를 갱신합니다.
</span><span lang=EN-US style=';color:#A000A0'>SAFE_FRMOV</span><span
style=';color:black'>는 객체의 멤버 함수<span lang=EN-US> FrameMove() 함수를
호출 하는 매크로입니다.</span></span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>&nbsp;</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:blue'>HRESULT</span><span lang=EN-US
style=';color:black'> </span><span lang=EN-US style='color:blue'>CMain</span><span lang=EN-US style=';color:black'>::</span><span
lang=EN-US style=';color:#880000'>FrameMove</span><span
lang=EN-US style=';color:black'>()</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>{</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; …</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:#A000A0'>SAFE_FRMOV</span><span
lang=EN-US style=';color:black'>(&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>m_pCam</span><span lang=EN-US
style=';color:black'>&nbsp; );</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; …</span></p>

<p class=MsoNormal><span lang=EN-US style=';color:black'>}</span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span>cam11_class.png</span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span style=''>전체 코드는 다음 예제를 살펴 보기 바랍니다<span
lang=EN-US>.</span></span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span><a
href="https://github.com/3dapi/ef01_camera/raw/master/cam11_class.zip">cam11_class.zip</a></span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:14.0pt;'>1.2.
뷰 행렬</span></p>

<p class=MsoNormal><span style=''>로컬 좌표 계의 위치로 설정된 정점은 장면 연출을 위해서
먼저 월드 행렬을 통해서 월드 변환을 합니다<span lang=EN-US>. 다음으로 카메라가 정의된 카메라 공간으로 변환하는데 이 변환을 뷰
변환이라 하고 이 때 정점의 변환에 적용되는 행렬을 뷰 행렬 이라 합니다. 뷰 행렬은 카메라의 위치, 카메라가 보고 있는 지점, Up 벡터를 입력
받아서 만들어 집니다.</span></span></p>

<p class=MsoNormal><span style=''>보통 카메라의 위치를<span lang=EN-US>
Eye 벡터라 하고, 카메라가 보고 있는 지점을 Look 벡터라 합니다. 뷰 행렬을 만들기 위해서 먼저 카메라의 시선 방향을 설정하는데 이것을
카메라의 z 축으로 설정합니다.</span></span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span><img width=352
height=276 src="https://github.com/3dapi/ef01_camera/raw/master/index.files/image001.gif"></span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span style=''>이 <span lang=EN-US>z 축과 Up 벡터를
이용해서 카메라의 x 축 벡터, 카메라의 y 축 벡터를 다음과 같이 만듭니다.</span></span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span>Zaxis&nbsp; = 카메라가 보고
있는 지점 위치(Look) &#8211; 카메라의 위치(Eye);</span></p>

<p class=MsoNormal><span>Zaxis = normalize(Zaxis);</span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span>Xaxis = Cross(Up, Zaxis);</span></p>

<p class=MsoNormal><span>Xaxis = normalize(Xaxis);</span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span>Yaxis = Cross( Zaxis,
Xaxis);</span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span style=''>위의 방법은<span lang=EN-US>
Direct3D가 왼손 좌표를 사용해서 이에 맞게 만들었습니다. 만약 OpenGL과 같이 오른손 좌표 계를 사용하는 경우라면 마지막 y 축을 결정할
때 x 와 z 축의 순서가 바뀌어야 합니다.</span></span></p>

<p class=MsoNormal><span style=''>이렇게 카메라의 <span lang=EN-US>x 축,
y 축, z 축을 구했으니 월드 공간에 있는 정점의 위치를 카메라 공간의 x 축,y 축, z 축에 해당하는 값을 구하면 이 값들이 카메라 공간으로
정점의 위치가 변환된 값이 됩니다. 이 값들은 간단히 카메라의 각각의 축에 대해서 카메라와 정점의 상대적인 위치 값을 내적을 이용해서 다음과 같이
계산 하면 됩니다.</span></span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span>P = 정점 위치;</span></p>

<p class=MsoNormal><span>Eye = 카메라 위치;</span></p>

<p class=MsoNormal><span>Float3 T = P - Eye;&nbsp;&nbsp;&nbsp; //
카메라와 정점의 상대 위치</span></p>

<p class=MsoNormal><span style=''>카메라<span lang=EN-US> X축에 대한 값
= Dot(T, 카메라 X축);</span></span></p>

<p class=MsoNormal><span style=''>카메라<span lang=EN-US> Y축에 대한 값
= Dot(T, 카메라 Y축);</span></span></p>

<p class=MsoNormal><span style=''>카메라<span lang=EN-US> Z축에 대한 값
= Dot(T, 카메라 Z축);</span></span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span><img width=466
height=383 src="https://github.com/3dapi/ef01_camera/raw/master/index.files/image002.gif"></span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span style=''>위의 계산 방법을 조금 변형하면 다음과 같이 쓸 수 있습니다<span
lang=EN-US>.</span></span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span>X' = Dot(P &#8211; Eye, Xaxis);</span></p>

<p class=MsoNormal><span>Y' = Dot(P &#8211; Eye, Yaxis);</span></p>

<p class=MsoNormal><span>Z' = Dot(P &#8211; Eye, Zaxis);</span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span style=''>괄호를 풀어 다음과 같이 작성합니다<span
lang=EN-US>.</span></span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span>X' = Dot(P, Xaxis)
- Dot(Eye, Xaxis);</span></p>

<p class=MsoNormal><span>Y' = Dot(P, Yaxis)
- Dot(Eye, Yaxis);</span></p>

<p class=MsoNormal><span>Z' = Dot(P, Zaxis)
- Dot(Eye, Zaxis);</span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span style=''>정점의<span lang=EN-US> 3차원 위치를 4차원
동차 좌표로 바꾸고, 행렬을 이용하면 다음과 같이 만들 수 있습니다.</span></span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:55.0pt;text-indent:-55.0pt'><span
lang=EN-US style=''><sub><img border=0 width=261 height=98
src="https://github.com/3dapi/ef01_camera/raw/master/index.files/image003.gif"></sub></span></p>

<p class=MsoNormal style='margin-left:55.0pt'><span lang=EN-US
style=''><sub><img border=0 width=398 height=98
src="https://github.com/3dapi/ef01_camera/raw/master/index.files/image004.gif"></sub></span></p>

<p class=MsoNormal style='margin-left:55.0pt;text-indent:-55.0pt'><span
lang=EN-US style=''>&nbsp;<sub><img border=0 width=398
height=98 src="https://github.com/3dapi/ef01_camera/raw/master/index.files/image005.gif"></sub></span></p>

<p class=MsoNormal><span style=''>뷰 행렬<span lang=EN-US> = <sub><img
border=0 width=230 height=98 src="https://github.com/3dapi/ef01_camera/raw/master/index.files/image006.gif"></sub></span></span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span style=''>수학적인 표현을 사용한 뷰 행렬을 프로그램으로 작성하기
위해서 다음과 같이 의사 코드<span lang=EN-US>(Pseudo code)를 작성합니다.</span></span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span>&nbsp;Xaxis.x&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;Yaxis.x&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Zaxis.x&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
0</span></p>

<p class=MsoNormal><span>&nbsp;Xaxis.y&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;Yaxis.y&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Zaxis.y&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
0</span></p>

<p class=MsoNormal><span>&nbsp;Xaxis.z&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;Yaxis.z&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Zaxis.z&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
0</span></p>

<p class=MsoNormal><span>-dot(Xaxis,
eye)&nbsp; -dot(Yaxis, eye)&nbsp; -dot(Zaxis, eye)&nbsp; 1</span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span style=''>전체적으로 뷰 변환을 담당할 뷰 행렬을<span
lang=EN-US> Direct3D SDK를 이용해서 코드로 작성한다면 다음과 같습니다.</span></span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:#880000'>ViewMatrix</span><span lang=EN-US
style=';color:black'>(</span><span lang=EN-US style='color:blue'>D3DXMATRIX</span><span lang=EN-US style=';
color:black'>* </span><span lang=EN-US style=';color:gray'>pOut</span><span
lang=EN-US style=';color:black'>, </span><span lang=EN-US
style=';color:blue'>D3DXVECTOR3</span><span lang=EN-US
style=';color:black'>* </span><span lang=EN-US style='color:gray'>vcPos</span><span lang=EN-US style=';color:black'>,
</span><span lang=EN-US style=';color:blue'>D3DXVECTOR3</span><span
lang=EN-US style=';color:black'>* </span><span lang=EN-US
style=';color:gray'>vcLook</span><span lang=EN-US
style=';color:black'>, </span><span lang=EN-US style='color:blue'>D3DXVECTOR3</span><span lang=EN-US style=';
color:black'>* </span><span lang=EN-US style=';color:gray'>vcUp</span><span
lang=EN-US style=';color:black'>)</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>{</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:blue'>D3DXVECTOR3</span><span
lang=EN-US style=';color:black'> </span><span lang=EN-US
style=';color:gray'>zAx</span><span lang=EN-US style='color:black'>;</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:blue'>D3DXVECTOR3</span><span
lang=EN-US style=';color:black'> </span><span lang=EN-US
style=';color:gray'>xAx</span><span lang=EN-US style='color:black'>;</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:blue'>D3DXVECTOR3</span><span
lang=EN-US style=';color:black'> </span><span lang=EN-US
style=';color:gray'>yAx</span><span lang=EN-US style='color:black'>;</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>&nbsp;</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>zAx</span><span lang=EN-US
style=';color:black'> = *</span><span lang=EN-US
style=';color:gray'>vcLook</span><span lang=EN-US
style=';color:black'> - *</span><span lang=EN-US
style=';color:gray'>vcPos</span><span lang=EN-US
style=';color:black'>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:#880000'>D3DXVec3Normalize</span><span
lang=EN-US style=';color:black'>(&amp;</span><span lang=EN-US
style=';color:gray'>zAx</span><span lang=EN-US style='color:black'>, &amp;</span><span lang=EN-US style=';
color:gray'>zAx</span><span lang=EN-US style=';color:black'>);</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:#880000'>D3DXVec3Cross</span><span
lang=EN-US style=';color:black'>(&amp;</span><span lang=EN-US
style=';color:gray'>xAx</span><span lang=EN-US style='color:black'>, </span><span lang=EN-US style=';color:gray'>vcUp</span><span
lang=EN-US style=';color:black'>, &amp;</span><span lang=EN-US
style=';color:gray'>zAx</span><span lang=EN-US style='color:black'>);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span lang=EN-US
style=';color:#880000'>D3DXVec3Normalize</span><span lang=EN-US
style=';color:black'>(&amp;</span><span lang=EN-US
style=';color:gray'>xAx</span><span lang=EN-US style='color:black'>, &amp;</span><span lang=EN-US style=';
color:gray'>xAx</span><span lang=EN-US style=';color:black'>);</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:#880000'>D3DXVec3Cross</span><span
lang=EN-US style=';color:black'>(&amp;</span><span lang=EN-US
style=';color:gray'>yAx</span><span lang=EN-US style='color:black'>, &amp;</span><span lang=EN-US style=';
color:gray'>zAx</span><span lang=EN-US style=';color:black'>,
&amp;</span><span lang=EN-US style=';color:gray'>xAx</span><span
lang=EN-US style=';color:black'>);</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>&nbsp;</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; *</span><span
lang=EN-US style=';color:gray'>pOut</span><span lang=EN-US
style=';color:black'> = </span><span lang=EN-US
style=';color:blue'>D3DXMATRIX</span></p>

<p class=MsoNormal style='text-indent:40.0pt;word-break:keep-all'><span
lang=EN-US style=';color:black'>(</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>xAx</span><span lang=EN-US
style=';color:black'>.</span><span lang=EN-US style='color:gray'>x</span><span lang=EN-US style=';color:black'>,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>yAx</span><span lang=EN-US
style=';color:black'>.</span><span lang=EN-US style='color:gray'>x</span><span lang=EN-US style=';color:black'>,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>zAx</span><span lang=EN-US
style=';color:black'>.</span><span lang=EN-US style='color:gray'>x</span><span lang=EN-US style=';color:black'>,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:red'>0</span><span lang=EN-US
style=';color:black'>,</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>xAx</span><span lang=EN-US
style=';color:black'>.</span><span lang=EN-US style='color:gray'>y</span><span lang=EN-US style=';color:black'>,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>yAx</span><span lang=EN-US
style=';color:black'>.</span><span lang=EN-US style='color:gray'>y</span><span lang=EN-US style=';color:black'>,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>zAx</span><span lang=EN-US
style=';color:black'>.</span><span lang=EN-US style='color:gray'>y</span><span lang=EN-US style=';color:black'>,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:red'>0</span><span lang=EN-US
style=';color:black'>,</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>xAx</span><span lang=EN-US
style=';color:black'>.</span><span lang=EN-US style='color:gray'>z</span><span lang=EN-US style=';color:black'>,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>yAx</span><span lang=EN-US
style=';color:black'>.</span><span lang=EN-US style='color:gray'>z</span><span lang=EN-US style=';color:black'>,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>zAx</span><span lang=EN-US
style=';color:black'>.</span><span lang=EN-US style='color:gray'>z</span><span lang=EN-US style=';color:black'>,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:red'>0</span><span lang=EN-US
style=';color:black'>,</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -</span><span
lang=EN-US style=';color:#880000'>D3DXVec3Dot</span><span
lang=EN-US style=';color:black'>(&amp;</span><span lang=EN-US
style=';color:gray'>xAx</span><span lang=EN-US style='color:black'>,</span><span lang=EN-US style=';color:gray'>vcPos</span><span
lang=EN-US style=';color:black'>),-</span><span lang=EN-US
style=';color:#880000'>D3DXVec3Dot</span><span lang=EN-US
style=';color:black'>(&amp;</span><span lang=EN-US
style=';color:gray'>yAx</span><span lang=EN-US style='color:black'>,</span><span lang=EN-US style=';color:gray'>vcPos</span><span
lang=EN-US style=';color:black'>),-</span><span lang=EN-US
style=';color:#880000'>D3DXVec3Dot</span><span lang=EN-US
style=';color:black'>(&amp;</span><span lang=EN-US
style=';color:gray'>zAx</span><span lang=EN-US style='color:black'>,</span><span lang=EN-US style=';color:gray'>vcPos</span><span
lang=EN-US style=';color:black'>), </span><span lang=EN-US
style=';color:red'>1</span><span lang=EN-US style='color:black'>);</span></p>

<p class=MsoNormal><span lang=EN-US style=';color:black'>}</span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span><a
href="https://github.com/3dapi/ef01_camera/raw/master/cam12_view.zip">cam12_view.zip</a></span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span style=''>만약 뷰 행렬을 만드는 것이 어렵다면<span
lang=EN-US> Direct3D의 D3DXMatrixLookAtLH() 함수를 이용해서 위와 같은 내용을 구할 수 있습니다.</span></span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:14.0pt;'>1.3
투영 행렬</span></p>

<p class=MsoNormal><span style=''>정점이 뷰 변환을 거치고 나서 다음 단계로 투영 변환을
합니다<span lang=EN-US>. 투영 변환은 컴퓨터 그래픽스에서는 정규 변환이라 하는데 이것은 장치에 의존하지 않은 독립적인 처리 과정이기
때문입니다.</span></span></p>

<p class=MsoNormal><span style=''>투영 변환은 건축물의 도면과 같이 모든 크기가 같은 비율로
그려지는 직교 투영<span lang=EN-US>(Orthographic Projection)과, 투시 원근법 이론을 반영한 투시 투영(Perspective
Projection)이 있습니다. 3D 게임에서는 Perspective Projection을 주로 사용하는데 투시 투영은 소실점(vanishing
point)을 최소 한 개 이상 갖고 있으며 이것을 행렬로 만들어 3차원 정점을 2차원 화면으로 전환 합니다.</span></span></p>

<p class=MsoNormal><span style=''>디아블로<span lang=EN-US>(Diablo)나
스타크래프트(Starcraft)와 같은 2D 게임의 경우 직교 투영의 한 종류인 등각 투영 (Isometric Projection) 등을 이용한
지형을 만들어 3차원 효과를 표현하기도 하는데 여기서는 3D 게임에서 많이 이용되는 Perspective Projection을 이용하겠습니다.</span></span></p>

<p class=MsoNormal><span>Perspective
Projection을 위해 다음 그림과 같이 카메라 뷰에 의한 사각뿔 대(View Frustum) 안에 있는 정점들의 변환 생각해봅시다.</span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span><img width=529
height=210 src="https://github.com/3dapi/ef01_camera/raw/master/index.files/image007.gif"></span></p>

<p class=MsoNormal><span>&lt;카메라에 의한 View
Frustum&gt;</span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span style=''>뷰 사각뿔 대 안에 있는 정점들의 값은 투영 변환<span
lang=EN-US>(정규 변환)을 거치면 장치에 의존하지 않는 정규 값을 갖게 되므로 정점의 위치 x, y, z 값은 Direct3D의 경우
최소(-1, -1, 0) 최대 (1, 1, 1) 값을 갖게 됩니다.</span></span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span style=''>이것을 좌표 계를 이용해서 그림을 그린다면 다음 그림처럼
됩니다<span lang=EN-US>.</span></span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span><img width=531
height=233 src="https://github.com/3dapi/ef01_camera/raw/master/index.files/image008.gif"></span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span style=''>이 때 정점의 위치를 변환하는 행렬을 다음과 같이 구성할
수 있습니다<span lang=EN-US>.</span></span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span><sub><img border=0
width=96 height=98 src="https://github.com/3dapi/ef01_camera/raw/master/index.files/image009.gif"></sub></span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span>a, b는 가상 화면의 근거리 면(Near
Plane), 가상 화면의 원거리 면(Far Plane)에 의 해 결정이 되고 Near 일 경우 0, Far의 경우 1이 되므로 (0,0,Z_Near),
(0,0,Z_Far)의 경우에 대해서 다음과 같은 식을 만들 수 있습니다.</span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span><sub><img border=0
width=204 height=26 src="https://github.com/3dapi/ef01_camera/raw/master/index.files/image010.gif"></sub>&nbsp;=&gt;<sub><img
border=0 width=113 height=46 src="https://github.com/3dapi/ef01_camera/raw/master/index.files/image011.gif"></sub> 에서 <sub><img
border=0 width=83 height=46 src="https://github.com/3dapi/ef01_camera/raw/master/index.files/image012.gif"></sub></span></p>

<p class=MsoNormal><span><sub><img border=0
width=141 height=24 src="https://github.com/3dapi/ef01_camera/raw/master/index.files/image013.gif"></sub>&nbsp;=&gt;<sub><img
border=0 width=107 height=46 src="https://github.com/3dapi/ef01_camera/raw/master/index.files/image014.gif"></sub> 에서 <sub><img
border=0 width=73 height=46 src="https://github.com/3dapi/ef01_camera/raw/master/index.files/image015.gif"></sub></span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span style=''>이 것을 풀면 다음과 같이<span
lang=EN-US> a, b 를 구할 수 있습니다.</span></span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span><sub><img border=0
width=160 height=58 src="https://github.com/3dapi/ef01_camera/raw/master/index.files/image016.gif"></sub>, <sub><img border=0
width=109 height=46 src="https://github.com/3dapi/ef01_camera/raw/master/index.files/image017.gif"></sub></span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span>a, b를 다시 행렬에 대입하면 투영
행렬은 다음과 같이 얻어 집니다.</span></p>

<p class=MsoNormal><span><sub><img border=0
width=266 height=101 src="https://github.com/3dapi/ef01_camera/raw/master/index.files/image018.gif"></sub></span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span style=''>만약 다음 그림과 같이 카메라의 시야 각<span
lang=EN-US>(FOV: Field Of View)이 있는 경우 FOV 값을 계산해 주어야 하므로 투영 변환 행렬은 다음 공식 과 같이 변화합니다.</span></span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span><img width=388
height=274 src="https://github.com/3dapi/ef01_camera/raw/master/index.files/image019.gif"></span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span><sub><img border=0
width=502 height=101 src="https://github.com/3dapi/ef01_camera/raw/master/index.files/image020.gif"></sub></span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span style=''>만약 시야 각<span lang=EN-US>(FOV)이
화면의 수직 축에 의해 결정이 되고, 화면의 폭과 높이의 비율인 종횡 비(Aspect Ratio) 값이 주어 진다면 위의 행렬은 다음과 같이 정리되며
이것은 게임에서 가장 많이 사용되는 투영 행렬이 됩니다.</span></span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span><sub><img border=0
width=477 height=101 src="https://github.com/3dapi/ef01_camera/raw/master/index.files/image021.gif"></sub></span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span>FOV 값은 외부에서 주어지는 것이므로
FOV/2 대신 FOV 값 그대로를 사용하는 경우도 있습니다.</span></p>

<p class=MsoNormal><span style=''>위의 행렬을 의사 코드로 구현한다면 다음과 같이 됩니다<span
lang=EN-US>.</span></span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span>float Near_Plane;</span></p>

<p class=MsoNormal><span>float Far_Plane;</span></p>

<p class=MsoNormal><span>float FOV; //Field
of View</span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span>float Aspect =
ScreenWidth/ScreenHeight;</span></p>

<p class=MsoNormal><span>float&nbsp;&nbsp;&nbsp;
h, w, Q;</span></p>

<p class=MsoNormal><span>h = cot(FOV/2.f);</span></p>

<p class=MsoNormal><span>w = h/ Aspect;</span></p>

<p class=MsoNormal><span>Q = Far_Plane /(
Far_Plane - Near_Plane);</span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span>D3DXMATRIX ProjectionMatrix(&nbsp; w,
0,&nbsp;&nbsp; 0,&nbsp;&nbsp; 0,</span></p>

<p class=MsoNormal><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0,
h,&nbsp;&nbsp; 0,&nbsp;&nbsp; 0,</span></p>

<p class=MsoNormal><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0,
0,&nbsp;&nbsp; Q,&nbsp;&nbsp; 1,</span></p>

<p class=MsoNormal><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0,
0, -zn*Q, 0);</span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span style=''>이것을<span lang=EN-US> Direct3D
SDK를 이용해서 만든다면 다음과 같습니다. 주의 할 것은 cot() 함수가 없기 때문에 이를 1/tan() 형태로 바꾸어 사용해야 합니다.</span></span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:blue'>void</span><span lang=EN-US
style=';color:black'> </span><span lang=EN-US style='color:#880000'>Perspective</span><span lang=EN-US style=';
color:black'>(</span><span lang=EN-US style=';color:blue'>D3DXMATRIX</span><span
lang=EN-US style=';color:black'> *</span><span lang=EN-US
style=';color:gray'>pOut</span><span lang=EN-US
style=';color:black'>, </span><span lang=EN-US style='color:blue'>FLOAT</span><span lang=EN-US style=';color:black'>
</span><span lang=EN-US style=';color:gray'>fovY</span><span
lang=EN-US style=';color:black'>, </span><span lang=EN-US
style=';color:blue'>FLOAT</span><span lang=EN-US
style=';color:black'> </span><span lang=EN-US style='color:gray'>Aspect</span><span lang=EN-US style=';
color:black'>, </span><span lang=EN-US style=';color:blue'>FLOAT</span><span
lang=EN-US style=';color:black'> </span><span lang=EN-US
style=';color:gray'>zn</span><span lang=EN-US style='color:black'>, </span><span lang=EN-US style=';color:blue'>FLOAT
</span><span lang=EN-US style=';color:gray'>zf</span><span
lang=EN-US style=';color:black'>)</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>{</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:blue'>FLOAT</span><span lang=EN-US
style=';color:black'>&nbsp;&nbsp; </span><span lang=EN-US
style=';color:gray'>h</span><span lang=EN-US style='color:black'> = </span><span lang=EN-US style=';color:red'>1</span><span
lang=EN-US style=';color:black'>/</span><span lang=EN-US
style=';color:#880000'>tanf</span><span lang=EN-US
style=';color:black'>(</span><span lang=EN-US style='color:gray'>fovY</span><span lang=EN-US style=';color:black'>/</span><span
lang=EN-US style=';color:red'>2.f</span><span lang=EN-US
style=';color:black'>);&nbsp; </span><span lang=EN-US
style=';color:green'>//cot(fovY/2);</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:blue'>FLOAT</span><span lang=EN-US
style=';color:black'>&nbsp;&nbsp; </span><span lang=EN-US
style=';color:gray'>w</span><span lang=EN-US style='color:black'> = </span><span lang=EN-US style=';color:gray'>h</span><span
lang=EN-US style=';color:black'> / </span><span lang=EN-US
style=';color:gray'>Aspect</span><span lang=EN-US
style=';color:black'>;</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:blue'>FLOAT</span><span lang=EN-US
style=';color:black'>&nbsp;&nbsp; </span><span lang=EN-US
style=';color:gray'>Q</span><span lang=EN-US style='color:black'> = </span><span lang=EN-US style=';color:gray'>zf</span><span
lang=EN-US style=';color:black'>/(</span><span lang=EN-US
style=';color:gray'>zf</span><span lang=EN-US style='color:black'>-</span><span lang=EN-US style=';color:gray'>zn</span><span
lang=EN-US style=';color:black'>);</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>&nbsp;</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; *</span><span
lang=EN-US style=';color:gray'>pOut</span><span lang=EN-US
style=';color:black'> = </span><span lang=EN-US
style=';color:blue'>D3DXMATRIX</span><span lang=EN-US
style=';color:black'>(&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>w</span><span lang=EN-US
style=';color:black'>, </span><span lang=EN-US style='color:red'>0</span><span lang=EN-US style=';color:black'>,&nbsp;&nbsp;&nbsp;&nbsp;
</span><span lang=EN-US style=';color:red'>0</span><span
lang=EN-US style=';color:black'>, </span><span lang=EN-US
style=';color:red'>0</span><span lang=EN-US style='color:black'>,</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:red'>0</span><span lang=EN-US
style=';color:black'>, </span><span lang=EN-US style='color:gray'>h</span><span lang=EN-US style=';color:black'>,&nbsp;&nbsp;&nbsp;&nbsp;
</span><span lang=EN-US style=';color:red'>0</span><span
lang=EN-US style=';color:black'>, </span><span lang=EN-US
style=';color:red'>0</span><span lang=EN-US style='color:black'>,</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:red'>0</span><span lang=EN-US
style=';color:black'>, </span><span lang=EN-US style='color:red'>0</span><span lang=EN-US style=';color:black'>,&nbsp;
&nbsp;&nbsp;&nbsp;</span><span lang=EN-US style=';color:gray'>Q</span><span
lang=EN-US style=';color:black'>, </span><span lang=EN-US
style=';color:red'>1</span><span lang=EN-US style='color:black'>,</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:red'>0</span><span lang=EN-US
style=';color:black'>, </span><span lang=EN-US style='color:red'>0</span><span lang=EN-US style=';color:black'>, -</span><span
lang=EN-US style=';color:gray'>zn</span><span lang=EN-US
style=';color:black'>*</span><span lang=EN-US style='color:gray'>Q</span><span lang=EN-US style=';color:black'>, </span><span
lang=EN-US style=';color:red'>0 </span><span lang=EN-US
style=';color:black'>);</span></p>

<p class=MsoNormal><span lang=EN-US style=';color:black'>}</span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span><a
href="https://github.com/3dapi/ef01_camera/raw/master/cam13_proj.zip">cam13_proj.zip</a></span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span style=''>이렇게<span lang=EN-US> FOV가 있는 투영
행렬을 직접 계산해서 사용해도 되고 아니면 Direct3D의 D3DXMatrixPerspectiveFovLH() 함수를 사용해서 구해도 됩니다.
앞에서 직접 구현한 뷰 행렬 계산과 투영 행렬을 구하는 전체 과정을 클래스로 다음 예제와 같이 만들 수 있습니다.</span></span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span><a
href="https://github.com/3dapi/ef01_camera/raw/master/cam14_view_proj.zip">cam14_view_proj.zip</a></span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span style=''>필자가 처음에는 대부분의 함수들을 만들어 썼지만 지금은<span
lang=EN-US> SDK 안에서 지원하는 함수가 있다면 이것을 이용하는 편입니다. 직접 만든 함수들이 최적화나 통제하기가 편하지만 모든 함수들에
대해서 작동 원리와 구현 방법에 대한 문서화와 예제들을 만들어야 하는데 이 일들도 많은 시간이 듭니다. 그런데 SDK안에 있는 함수들은 SDK
도움말에서 설명을 하고 구현 하는 예제가 갖추어져 있어서 다른 사람과 작업을 할 때 다로 부가적인 일들을 하지 않습니다. SDK 함수의 구현 원리를
알고 있다면 이를 이용하는 것이 좋고, 위의 코드에서 뷰 행렬을 구하는 것을 직접 하기 보다 </span></span><span
lang=EN-US style=''>D3DXMatrixLookAtLH</span><span lang=EN-US
style=''>() 함수를, 투영 행렬은 D3DXMatrixPerspectiveFovLH() 함수를 이용해서 구현하도록
권하는 편입니다.</span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:16.0pt;'>2.
1, 3인칭 카메라</span></p>

<p class=MsoNormal><span style=''>카메라의 뷰 행렬과 투영 행렬을 만들었다면 이를 바탕으로
주인공 캐릭터의 이동이나 키보드<span lang=EN-US>, 마우스의 이벤트에 따라 카메라를 이동하거나 회전하는 부분을 추가해 봅시다. 보통
캐릭터의 위치와 카메라의 상대적인 위치가 변하지 않는 카메라를 1칭(First Personal) 카메라라 하고, 반대로 카메라와 캐릭터의 상대적인
위치가 변하는 카메라를 3인칭 카메라라 합니다.</span></span></p>

<p class=MsoNormal><span>1인칭 카메라가 3인칭 카메라보다 만들기
쉽습니다. 먼저 1인칭 카메라의 이동을 구현한 다음, 3인칭 카메라를 만들어 봅시다.</span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:14.0pt;'>2.1.
전진과 후진</span></p>

<p class=MsoNormal><span style=''>퀘이크<span lang=EN-US>(Quake)와 같은
FPS(First Personal Shooting Game)에서 캐릭터의 이동 조작은 'W', 'S', 'A', 'D' 를 가지고 진행합니다.
이 부분을 카메라 클래스에 추가하는데 'W', 'S' 키에 해당하는 전진과 후진을 MoveForward() 함수로, 'A', 'D' 키에 해당하는
좌, 우 측면 이동을 MoveSideward() 함수로 구현해 보도록 합시다.</span></span></p>

<p class=MsoNormal><span style=''>전진 또는 후진은 카메라가 캐릭터의 시선 방향으로 이동을
의미합니다<span lang=EN-US>. 캐릭터의 시선 방향은 카메라의 z 축의 방향과 일치하므로 다음 그림과 z 축을 따라 이동하는 것과 동일합니다.</span></span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span><img width=440
height=272 src="https://github.com/3dapi/ef01_camera/raw/master/index.files/image022.gif"></span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span style=''>카메라의 위치를<span lang=EN-US> Eye,
카메라가 보고 있는 지점을 Look, 카메라의 이동 스피드를 Speed 라 하면 다음과 같은 의사 코드를 만들 수 있습니다.</span></span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span>Float3 vcZ = Look &#8211;
Eye;</span></p>

<p class=MsoNormal><span>Normalize(vcZ);</span></p>

<p class=MsoNormal><span>Eye&nbsp; += vcZ *
Speed;</span></p>

<p class=MsoNormal><span>Look += vcZ *
Speed;</span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span style=''>뷰 행렬의<span lang=EN-US> _13,
_23, _33 은 카메라의 z 축에 해당 되므로 다음과 같이 작성해도 됩니다.</span></span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span>Float3 vcZ(mtView._13,
mtView._23, mtView._33);</span></p>

<p class=MsoNormal><span>Eye&nbsp; += vcZ *
Speed;</span></p>

<p class=MsoNormal><span>Look += vcZ *
Speed;</span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span style=''>이것을<span lang=EN-US> DirectX
SDK를 이용해서 다음과 같이 구현 합니다.</span></span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:blue'>void</span><span lang=EN-US
style=';color:black'> </span><span lang=EN-US style='color:blue'>CMcCamera</span><span lang=EN-US style=';
color:black'>::</span><span lang=EN-US style=';color:#880000'>MoveForward</span><span
lang=EN-US style=';color:black'>(</span><span lang=EN-US
style=';color:blue'>FLOAT</span><span lang=EN-US
style=';color:black'> </span><span lang=EN-US style='color:gray'>fSpeed</span><span lang=EN-US style=';
color:black'>, </span><span lang=EN-US style=';color:blue'>FLOAT</span><span
lang=EN-US style=';color:black'> </span><span lang=EN-US
style=';color:gray'>fY</span><span lang=EN-US style='color:black'>)</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>{</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:blue'>D3DXVECTOR3</span><span
lang=EN-US style=';color:black'> </span><span lang=EN-US
style=';color:#880000'>tmp</span><span lang=EN-US
style=';color:black'>(</span><span lang=EN-US style='color:gray'>m_mtViw</span><span lang=EN-US style=';
color:black'>.</span><span lang=EN-US style=';color:gray'>_13</span><span
lang=EN-US style=';color:black'>, </span><span lang=EN-US
style=';color:gray'>m_mtViw</span><span lang=EN-US
style=';color:black'>.</span><span lang=EN-US style='color:gray'>_23</span><span lang=EN-US style=';color:black'>*</span><span
lang=EN-US style=';color:gray'>fY</span><span lang=EN-US
style=';color:black'>, </span><span lang=EN-US style='color:gray'>m_mtViw</span><span lang=EN-US style=';
color:black'>.</span><span lang=EN-US style=';color:gray'>_33</span><span
lang=EN-US style=';color:black'>);</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:#880000'>D3DXVec3Normalize</span><span
lang=EN-US style=';color:black'>(&amp;</span><span lang=EN-US
style=';color:gray'>tmp</span><span lang=EN-US style='color:black'>,&amp;</span><span lang=EN-US style=';
color:gray'>tmp</span><span lang=EN-US style=';color:black'>);</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>&nbsp;</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>m_vcEye</span><span lang=EN-US
style=';color:black'>&nbsp; += </span><span lang=EN-US
style=';color:gray'>tmp</span><span lang=EN-US style='color:black'> * </span><span lang=EN-US style=';color:gray'>fSpeed</span><span
lang=EN-US style=';color:black'>;</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>m_vcLook</span><span lang=EN-US
style=';color:black'> += </span><span lang=EN-US
style=';color:gray'>tmp</span><span lang=EN-US style='color:black'> * </span><span lang=EN-US style=';color:gray'>fSpeed</span><span
lang=EN-US style=';color:black'>;</span></p>

<p class=MsoNormal><span lang=EN-US style=';color:black'>}</span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span style=''>측면 이동은 카메라의<span lang=EN-US> x
축의 방향과 평행하게 다음 그림처럼 평행 이동하는 것을 의미합니다.</span></span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span><img width=457
height=265 src="https://github.com/3dapi/ef01_camera/raw/master/index.files/image023.gif"></span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span style=''>이도 캐릭터의 시선 방향으로 이동을 의미합니다<span
lang=EN-US>. 캐릭터의 시선 방향은 카메라의 z 축의 방향과 일치하므로 다음 그림과 z 축을 따라 이동하는 것과 동일합니다. 카메라의
x 축을 구하기 위해서 뷰 행렬의 _11, _21, _31 값을 이용하는데 만약 월드 좌표와 평행하게 이동하려면 x 축의 y 값을 0으로 설정합니다.</span></span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span>Float3
vcX(mtView._11, 0, mtView._31);</span></p>

<p class=MsoNormal><span>Normalize(vcX);</span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span>Eye&nbsp; += vcZ *
Speed;</span></p>

<p class=MsoNormal><span>Look += vcZ *
Speed;</span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span style=''>이것을<span lang=EN-US>
MoveSideward() 함수로 구현하면 다음과 같습니다.</span></span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:blue'>void</span><span lang=EN-US
style=';color:black'> </span><span lang=EN-US style='color:blue'>CMcCamera</span><span lang=EN-US style=';
color:black'>::</span><span lang=EN-US style=';color:#880000'>MoveSideward</span><span
lang=EN-US style=';color:black'>(</span><span lang=EN-US
style=';color:blue'>FLOAT</span><span lang=EN-US
style=';color:black'> </span><span lang=EN-US style='color:gray'>fSpeed</span><span lang=EN-US style=';
color:black'>)</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>{</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:blue'>D3DXVECTOR3</span><span
lang=EN-US style=';color:black'> </span><span lang=EN-US
style=';color:#880000'>tmp</span><span lang=EN-US
style=';color:black'>(</span><span lang=EN-US style='color:gray'>m_mtViw</span><span lang=EN-US style=';
color:black'>.</span><span lang=EN-US style=';color:gray'>_11</span><span
lang=EN-US style=';color:black'>, </span><span lang=EN-US
style=';color:red'>0</span><span lang=EN-US style='color:black'>, </span><span lang=EN-US style=';color:gray'>m_mtViw</span><span
lang=EN-US style=';color:black'>.</span><span lang=EN-US
style=';color:gray'>_31</span><span lang=EN-US style='color:black'>);</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:#880000'>D3DXVec3Normalize</span><span
lang=EN-US style=';color:black'>(&amp;</span><span lang=EN-US
style=';color:gray'>tmp</span><span lang=EN-US style='color:black'>,&amp;</span><span lang=EN-US style=';
color:gray'>tmp</span><span lang=EN-US style=';color:black'>);</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>&nbsp;</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>m_vcEye</span><span lang=EN-US
style=';color:black'>&nbsp; += </span><span lang=EN-US
style=';color:gray'>tmp</span><span lang=EN-US style='color:black'> * </span><span lang=EN-US style=';color:gray'>fSpeed</span><span
lang=EN-US style=';color:black'>;</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>m_vcLook</span><span lang=EN-US
style=';color:black'> += </span><span lang=EN-US
style=';color:gray'>tmp</span><span lang=EN-US style='color:black'> * </span><span lang=EN-US style=';color:gray'>fSpeed</span><span
lang=EN-US style=';color:black'>;</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>}</span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span style=''>전진<span lang=EN-US>, 측면 이동이 완성되었으므로
다음과 같이 카메라의 FrameMove() 함수에 인풋 클래스의 키 이벤트를 가져와서 이동할 수 있도록 다음과 같이 완성합니다.</span></span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:blue'>INT</span><span lang=EN-US style='color:black'> </span><span lang=EN-US style=';color:blue'>CMcCamera</span><span
lang=EN-US style=';color:black'>::</span><span lang=EN-US
style=';color:#880000'>FrameMove</span><span lang=EN-US
style=';color:black'>()</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>{</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:blue'>if</span><span lang=EN-US
style=';color:black'>(</span><span lang=EN-US style='color:gray'>g_pApp</span><span lang=EN-US style=';
color:black'>-&gt;</span><span lang=EN-US style=';color:gray'>m_pInput</span><span
lang=EN-US style=';color:black'>-&gt;</span><span lang=EN-US
style=';color:#880000'>KeyState</span><span lang=EN-US
style=';color:black'>(</span><span lang=EN-US style='color:fuchsia'>'W'</span><span lang=EN-US style=';
color:black'>))&nbsp;&nbsp; </span><span lang=EN-US style=';
color:green'>// 전진 이동</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:#880000'>MoveForward</span><span
lang=EN-US style=';color:black'>(</span><span lang=EN-US
style=';color:red'>0.1f</span><span lang=EN-US style='color:black'>, </span><span lang=EN-US style=';color:red'>1.f</span><span
lang=EN-US style=';color:black'>);</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>&nbsp;</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:blue'>if</span><span lang=EN-US
style=';color:black'>(</span><span lang=EN-US style='color:gray'>g_pApp</span><span lang=EN-US style=';
color:black'>-&gt;</span><span lang=EN-US style=';color:gray'>m_pInput</span><span
lang=EN-US style=';color:black'>-&gt;</span><span lang=EN-US
style=';color:#880000'>KeyState</span><span lang=EN-US
style=';color:black'>(</span><span lang=EN-US style='color:fuchsia'>'S'</span><span lang=EN-US style=';
color:black'>))&nbsp;&nbsp; </span><span lang=EN-US style=';
color:green'>// 후진 이동</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:#880000'>MoveForward</span><span
lang=EN-US style=';color:black'>(-</span><span lang=EN-US
style=';color:red'>0.1f</span><span lang=EN-US style='color:black'>, </span><span lang=EN-US style=';color:red'>1.f</span><span
lang=EN-US style=';color:black'>);</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>&nbsp;</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:blue'>if</span><span lang=EN-US
style=';color:black'>(</span><span lang=EN-US style='color:gray'>g_pApp</span><span lang=EN-US style=';
color:black'>-&gt;</span><span lang=EN-US style=';color:gray'>m_pInput</span><span
lang=EN-US style=';color:black'>-&gt;</span><span lang=EN-US
style=';color:#880000'>KeyState</span><span lang=EN-US
style=';color:black'>(</span><span lang=EN-US style='color:fuchsia'>'A'</span><span lang=EN-US style=';
color:black'>))&nbsp;&nbsp; </span><span lang=EN-US style=';
color:green'>// 좌측 이동</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:#880000'>MoveSideward</span><span
lang=EN-US style=';color:black'>(-</span><span lang=EN-US
style=';color:red'>0.1f</span><span lang=EN-US style='color:black'>);</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>&nbsp;</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:blue'>if</span><span lang=EN-US
style=';color:black'>(</span><span lang=EN-US style='color:gray'>g_pApp</span><span lang=EN-US style=';
color:black'>-&gt;</span><span lang=EN-US style=';color:gray'>m_pInput</span><span
lang=EN-US style=';color:black'>-&gt;</span><span lang=EN-US
style=';color:#880000'>KeyState</span><span lang=EN-US
style=';color:black'>(</span><span lang=EN-US style='color:fuchsia'>'D'</span><span lang=EN-US style=';
color:black'>))&nbsp;&nbsp; </span><span lang=EN-US style=';
color:green'>// 우측 이동</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:#880000'>MoveSideward</span><span
lang=EN-US style=';color:black'>(</span><span lang=EN-US
style=';color:red'>0.1f</span><span lang=EN-US style='color:black'>);</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>&nbsp;</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:#880000'>D3DXMatrixLookAtLH</span><span
lang=EN-US style=';color:black'>(&amp;</span><span lang=EN-US
style=';color:gray'>m_mtViw</span><span lang=EN-US
style=';color:black'>, &amp;</span><span lang=EN-US
style=';color:gray'>m_vcEye</span><span lang=EN-US
style=';color:black'>, &amp;</span><span lang=EN-US
style=';color:gray'>m_vcLook</span><span lang=EN-US
style=';color:black'>, &amp;</span><span lang=EN-US
style=';color:gray'>m_vcUp</span><span lang=EN-US
style=';color:black'>);</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>g_pApp</span><span lang=EN-US
style=';color:black'>-&gt;</span><span lang=EN-US
style=';color:gray'>m_pd3dDevice</span><span lang=EN-US
style=';color:black'>-&gt;</span><span lang=EN-US
style=';color:#880000'>SetTransform</span><span lang=EN-US
style=';color:black'>(</span><span lang=EN-US style='color:#A000A0'>D3DTS_VIEW</span><span lang=EN-US style=';
color:black'>, &amp;</span><span lang=EN-US style=';color:gray'>m_mtViw</span><span
lang=EN-US style=';color:black'>);</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>g_pApp</span><span lang=EN-US
style=';color:black'>-&gt;</span><span lang=EN-US
style=';color:gray'>m_pd3dDevice</span><span lang=EN-US
style=';color:black'>-&gt;</span><span lang=EN-US
style=';color:#880000'>SetTransform</span><span lang=EN-US
style=';color:black'>(</span><span lang=EN-US style='color:#A000A0'>D3DTS_PROJECTION</span><span lang=EN-US style='color:black'>, &amp;</span><span lang=EN-US style=';
color:gray'>m_mtPrj</span><span lang=EN-US style=';color:black'>);</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>&nbsp;</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:blue'>return</span><span lang=EN-US
style=';color:black'> </span><span lang=EN-US style='color:red'>0</span><span lang=EN-US style=';color:black'>;</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>}</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>&nbsp;</span></p>

<p class=MsoNormal style='word-break:keep-all'><span style=';
color:black'>전체 코드는 다음 예제를 살펴보기 바랍니다<span lang=EN-US>.</span></span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>&nbsp;</span></p>

<p class=MsoNormal><span><a
href="https://github.com/3dapi/ef01_camera/raw/master/cam21_move_ws.zip">cam21_move_ws.zip</a></span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span style=''>이동이 된다면 휠 마우스로 전진<span
lang=EN-US>, 후진 이동을 추가해 봅시다. 인풋 클래스에서 마우스 휠의 상대적 위치를 z 값에 저장한다고 가정한다면 다음과 같이 작성할
수 있습니다.</span></span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:green'>&nbsp;</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:blue'>D3DXVECTOR3</span><span lang=EN-US
style=';color:black'> </span><span lang=EN-US style='color:gray'>vcD</span><span lang=EN-US style=';color:black'>
= </span><span lang=EN-US style=';color:gray'>g_pApp</span><span
lang=EN-US style=';color:black'>-&gt;</span><span lang=EN-US
style=';color:gray'>m_pInput</span><span lang=EN-US
style=';color:black'>-&gt;</span><span lang=EN-US
style=';color:#880000'>GetMouseEps</span><span lang=EN-US
style=';color:black'>();</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>&nbsp;</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:blue'>if</span><span lang=EN-US style='color:black'>(</span><span lang=EN-US style=';color:gray'>vcD</span><span
lang=EN-US style=';color:black'>.</span><span lang=EN-US
style=';color:gray'>z</span><span lang=EN-US style='color:black'> !=</span><span lang=EN-US style=';color:red'>0.f</span><span
lang=EN-US style=';color:black'>)</span></p>

<p class=MsoNormal style='word-break:keep-all'><span lang=EN-US
style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:#880000'>MoveForward</span><span
lang=EN-US style=';color:black'>(-</span><span lang=EN-US
style=';color:gray'>vcD</span><span lang=EN-US style='color:black'>.</span><span lang=EN-US style=';color:gray'>z</span><span
lang=EN-US style=';color:black'>* </span><span lang=EN-US
style=';color:red'>.1f</span><span lang=EN-US style='color:black'>, </span><span lang=EN-US style=';color:red'>1.f</span><span
lang=EN-US style=';color:black'>);</span></p>

<p class=MsoNormal><span lang=EN-US style=';color:black'>&nbsp;</span></p>

<p class=MsoNormal><span style=';color:black'>다음은 키보드와 휠 마우스에 대해서
카메라의 전진<span lang=EN-US>, 후진에 대한 코드가 들어있는 예제입니다.</span></span></p>

<p class=MsoNormal><span lang=EN-US style=';color:black'>&nbsp;</span></p>

<p class=MsoNormal><span><a
href="https://github.com/3dapi/ef01_camera/raw/master/cam21_wheel.zip">cam21_wheel.zip</a></span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:14.0pt;'>2.2
카메라 회전</span></p>

<p class=MsoNormal><span style=''>회전은 카메라 제작에서 가장 난이도가 높은 부분 중의 하나입니다<span
lang=EN-US>. 3D의 회전 부분에서 항상 신경을 써야 할 부분이 짐벌 락(Gimbal Lock) 문제입니다. 일반적으로 두 행렬의 곱
AB ≠ BA 입을 대부분 잘 알고 있을 것입니다. 카메라의 회전도 행렬을 이용할 수 있는데 만약 카메라의 y 축 회전과 x 축 회전을 따로 계산해서
이용하려 한다면 짐벌 락 문제를 생각해야 합니다.</span></span></p>

<p class=MsoNormal><span style=''>짐벌 락 문제를 해결하는 여러 방법 중에서 가장 간단한
방법은 회전을 누적 시키는 것입니다<span lang=EN-US>. 전체 회전 각을 이용하는 것이 아니라 회전이 생길 때마다 이 회전에 대한 행렬을
이전의 회전 행렬에 곱해서 현재의 회전 행렬을 구하는 방법입니다. 만약 월드 좌표의 y 축에 대한 회전, x 축에 대한 회전의 경우라면 좀 더
쉽게 카메라의 전을 구할 수 있습니다.</span></span></p>

<p class=MsoNormal><span style=''>다음은 월드 좌표<span lang=EN-US> y 축의
회전의 경우 카메라의 y축과 Look 벡터의 회전을 다음과 같이 구합니다.</span></span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span>1. 마우스의 상대 좌표 값을 읽는다.</span></p>

<p class=MsoNormal style='text-indent:15.0pt'><span lang=EN-US
style=''>Float3 vcEps = Input-&gt;GetMouseEpsilon();</span></p>

<p class=MsoNormal><span>2. 이 값을 적절히 라디안 값으로
변경한 후에 이 값으로 월드 좌표에 대한 y 축의 회전 행렬을 구한다.</span></p>

<p class=MsoNormal style='text-indent:15.0pt'><span lang=EN-US
style=''>Yaw = D3DXToRadian(vcEps.x * Speed);</span></p>

<p class=MsoNormal style='text-indent:15.0pt'><span lang=EN-US
style=''>rtY&nbsp; = MatrixRotationY(Yaw);</span></p>

<p class=MsoNormal><span>3. Look 벡터를 회전하기 위해
카메라의 위치에서 Look 벡터의 상대적인 벡터를 구한다.</span></p>

<p class=MsoNormal style='text-indent:15.0pt'><span lang=EN-US
style=''>vcZ = Look - Eye;</span></p>

<p class=MsoNormal><span>4. 뷰 행렬에서 카메라의 y 축 벡터를
얻는다.</span></p>

<p class=MsoNormal style='text-indent:15.0pt'><span lang=EN-US
style=''>vcY = Float3(View._12, View._22, View._32);</span></p>

<p class=MsoNormal><span>5. 3과 4의 벡터들을 회전 행렬을
이용해서 회전 시킨다.</span></p>

<p class=MsoNormal style='text-indent:15.0pt'><span lang=EN-US
style=''>vcZ = rtY(vcZ);</span></p>

<p class=MsoNormal style='text-indent:15.0pt'><span lang=EN-US
style=''>vcY = rtY(vcY);</span></p>

<p class=MsoNormal><span>6. Look 벡터와 Up 벡터를 다시
계산한다.</span></p>

<p class=MsoNormal style='text-indent:15.0pt'><span lang=EN-US
style=''>Look = vcZ + Eye;</span></p>

<p class=MsoNormal style='text-indent:15.0pt'><span lang=EN-US
style=''>Up&nbsp;&nbsp; = vcY;</span></p>

<p class=MsoNormal><span>7.
D3DXMatrixLookAtLH() 함수를 이용해서 뷰 행렬을 구한다.</span></p>

<p class=MsoNormal style='text-indent:15.0pt'><span lang=EN-US
style=''>D3DXMatrixLookAtLH(View, Eye, Look, Up);</span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span style=''>카메라의<span lang=EN-US> x 축을 중심으로
회전하는 경우에는 위의 방법이 약간 바뀌는데 이 부분은 카메라의 x 축 벡터를 구하고 이에 대한 회전 행렬을 구하는 차이이며 전체 방법은 다음과
같습니다.</span></span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span>1. 마우스의 상대 좌표 값을 읽는다.</span></p>

<p class=MsoNormal style='text-indent:15.0pt'><span lang=EN-US
style=''>Float3 vcEps = Input-&gt;GetMouseEpsilon();</span></p>

<p class=MsoNormal><span>2. 카메라에 대한 x, y축 벡터는
뷰 행렬에서 얻고, Look &#8211; Eye 벡터를 구한다.</span></p>

<p class=MsoNormal style='text-indent:15.0pt'><span lang=EN-US
style=''>VcX = Float3(View._11, View._21, View._31);</span></p>

<p class=MsoNormal style='text-indent:15.0pt'><span lang=EN-US
style=''>vcY = Float3(View._12, View._22, View._32);</span></p>

<p class=MsoNormal style='text-indent:15.0pt'><span lang=EN-US
style=''>vcZ = Look - Eye;</span></p>

<p class=MsoNormal style='text-indent:15.0pt'><span lang=EN-US
style=''>&nbsp;</span></p>

<p class=MsoNormal><span>3.이 마우스의 x축에 대한 상대적인
값을 라디안 값으로 변경한 후 카메라의 x에 대한 회전 행렬을 구한다.</span></p>

<p class=MsoNormal style='text-indent:15.0pt'><span lang=EN-US
style=''>Pitch = D3DXToRadian(vcEps.x * Speed);</span></p>

<p class=MsoNormal style='text-indent:15.0pt'><span lang=EN-US
style=''>rtX = MatrixRotationAxis(vcX, Pitch);</span></p>

<p class=MsoNormal><span>4. 카메라의 y, z 축을 3의 행렬을
이용해서 회전 시킨다.</span></p>

<p class=MsoNormal style='text-indent:15.0pt'><span lang=EN-US
style=''>vcZ = rtX(vcZ);</span></p>

<p class=MsoNormal style='text-indent:15.0pt'><span lang=EN-US
style=''>vcY = rtX(vcY);</span></p>

<p class=MsoNormal><span>5. Look 벡터와 Up 벡터를 다시
계산한다.</span></p>

<p class=MsoNormal style='text-indent:15.0pt'><span lang=EN-US
style=''>Look = vcZ + Eye;</span></p>

<p class=MsoNormal style='text-indent:15.0pt'><span lang=EN-US
style=''>Up&nbsp;&nbsp; = vcY;</span></p>

<p class=MsoNormal><span>6.
D3DXMatrixLookAtLH() 함수를 이용해서 뷰 행렬을 구한다.</span></p>

<p class=MsoNormal style='text-indent:15.0pt'><span lang=EN-US
style=''>D3DXMatrixLookAtLH(View, Eye, Look, Up);</span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span style=''>월드 행렬의<span lang=EN-US> y 축, 카메라의
x 축에 대한 회전을 DirectX SDK를 이용해서 다음과 같이 카메라의 회전을 구하는 코드를 만들 수 있습니다.</span></span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:blue'>void</span><span lang=EN-US
style=';color:black'> </span><span lang=EN-US style='color:blue'>CMcCamera</span><span lang=EN-US style=';
color:black'>::</span><span lang=EN-US style=';color:#880000'>Rotate</span><span
lang=EN-US style=';color:black'>(</span><span lang=EN-US
style=';color:blue'>const</span><span lang=EN-US
style=';color:black'> </span><span lang=EN-US style='color:blue'>D3DXVECTOR3</span><span lang=EN-US style=';
color:black'>* </span><span lang=EN-US style=';color:gray'>vcDelta</span><span
lang=EN-US style=';color:black'>, </span><span lang=EN-US
style=';color:blue'>float</span><span lang=EN-US
style=';color:black'> </span><span lang=EN-US style='color:gray'>fSpeed</span><span lang=EN-US style=';
color:black'>)</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>{</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:blue'>D3DXVECTOR3</span><span
lang=EN-US style=';color:black'> </span><span lang=EN-US
style=';color:gray'>vcEps</span><span lang=EN-US
style=';color:black'> = *</span><span lang=EN-US
style=';color:gray'>vcDelta</span><span lang=EN-US
style=';color:black'>;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:blue'>FLOAT</span><span lang=EN-US
style=';color:black'>&nbsp;&nbsp; </span><span lang=EN-US
style=';color:gray'>fYaw</span><span lang=EN-US
style=';color:black'>&nbsp;&nbsp;&nbsp; ;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:blue'>FLOAT</span><span lang=EN-US
style=';color:black'>&nbsp;&nbsp; </span><span lang=EN-US
style=';color:gray'>fPitch</span><span lang=EN-US
style=';color:black'>&nbsp; ;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:blue'>D3DXVECTOR3</span><span
lang=EN-US style=';color:black'> </span><span lang=EN-US
style=';color:gray'>vcZ</span><span lang=EN-US style='color:black'>;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:blue'>D3DXVECTOR3</span><span
lang=EN-US style=';color:black'> </span><span lang=EN-US
style=';color:gray'>vcY</span><span lang=EN-US style='color:black'>;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:blue'>D3DXVECTOR3</span><span
lang=EN-US style=';color:black'> </span><span lang=EN-US
style=';color:gray'>vcX</span><span lang=EN-US style='color:black'>;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:blue'>D3DXMATRIX</span><span
lang=EN-US style=';color:black'> </span><span lang=EN-US
style=';color:gray'>rtY</span><span lang=EN-US style='color:black'>;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:blue'>D3DXMATRIX</span><span
lang=EN-US style=';color:black'> </span><span lang=EN-US
style=';color:gray'>rtX</span><span lang=EN-US style='color:black'>;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:green'>// 월드 좌표 y 축에 대한 회전</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>fYaw</span><span lang=EN-US
style=';color:black'>&nbsp;&nbsp;&nbsp; = </span><span
lang=EN-US style=';color:#A000A0'>D3DXToRadian</span><span
lang=EN-US style=';color:black'>(</span><span lang=EN-US
style=';color:gray'>vcEps</span><span lang=EN-US
style=';color:black'>.</span><span lang=EN-US style='color:gray'>x</span><span lang=EN-US style=';color:black'> *
</span><span lang=EN-US style=';color:gray'>fSpeed</span><span
lang=EN-US style=';color:black'>);</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:#880000'>D3DXMatrixRotationY</span><span
lang=EN-US style=';color:black'>(&amp;</span><span lang=EN-US
style=';color:gray'>rtY</span><span lang=EN-US style='color:black'>, </span><span lang=EN-US style=';color:gray'>fYaw</span><span
lang=EN-US style=';color:black'>);</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>vcZ</span><span lang=EN-US
style=';color:black'> = </span><span lang=EN-US
style=';color:gray'>m_vcLook</span><span lang=EN-US
style=';color:black'>-</span><span lang=EN-US style='color:gray'>m_vcEye</span><span lang=EN-US style=';
color:black'>;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>vcY</span><span lang=EN-US
style=';color:black'> = </span><span lang=EN-US
style=';color:blue'>D3DXVECTOR3</span><span lang=EN-US
style=';color:black'>(</span><span lang=EN-US style='color:gray'>m_mtViw</span><span lang=EN-US style=';
color:black'>.</span><span lang=EN-US style=';color:gray'>_12</span><span
lang=EN-US style=';color:black'>, </span><span lang=EN-US
style=';color:gray'>m_mtViw</span><span lang=EN-US
style=';color:black'>.</span><span lang=EN-US style='color:gray'>_22</span><span lang=EN-US style=';color:black'>,
</span><span lang=EN-US style=';color:gray'>m_mtViw</span><span
lang=EN-US style=';color:black'>.</span><span lang=EN-US
style=';color:gray'>_32</span><span lang=EN-US style='color:black'>);</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:#880000'>D3DXVec3TransformCoord</span><span
lang=EN-US style=';color:black'>(&amp;</span><span lang=EN-US
style=';color:gray'>vcZ</span><span lang=EN-US style='color:black'>, &amp;</span><span lang=EN-US style=';
color:gray'>vcZ</span><span lang=EN-US style=';color:black'>,
&amp;</span><span lang=EN-US style=';color:gray'>rtY</span><span
lang=EN-US style=';color:black'>);</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:#880000'>D3DXVec3TransformCoord</span><span
lang=EN-US style=';color:black'>(&amp;</span><span lang=EN-US
style=';color:gray'>vcY</span><span lang=EN-US style='color:black'>, &amp;</span><span lang=EN-US style=';
color:gray'>vcY</span><span lang=EN-US style=';color:black'>,
&amp;</span><span lang=EN-US style=';color:gray'>rtY</span><span
lang=EN-US style=';color:black'>);</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>m_vcLook</span><span lang=EN-US
style=';color:black'>= </span><span lang=EN-US style='color:gray'>vcZ</span><span lang=EN-US style=';color:black'>
+ </span><span lang=EN-US style=';color:gray'>m_vcEye</span><span
lang=EN-US style=';color:black'>;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>m_vcUp</span><span lang=EN-US
style=';color:black'>&nbsp; = </span><span lang=EN-US
style=';color:gray'>vcY</span><span lang=EN-US style='color:black'>;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:#880000'>D3DXMatrixLookAtLH</span><span
lang=EN-US style=';color:black'>(&amp;</span><span lang=EN-US
style=';color:gray'>m_mtViw</span><span lang=EN-US
style=';color:black'>, &amp;</span><span lang=EN-US
style=';color:gray'>m_vcEye</span><span lang=EN-US
style=';color:black'>, &amp;</span><span lang=EN-US
style=';color:gray'>m_vcLook</span><span lang=EN-US
style=';color:black'>, &amp;</span><span lang=EN-US
style=';color:gray'>m_vcUp</span><span lang=EN-US
style=';color:black'>);</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:green'>// 카메라의 x 축에 대한 회전</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>fPitch</span><span lang=EN-US
style=';color:black'>&nbsp; = </span><span lang=EN-US
style=';color:#A000A0'>D3DXToRadian</span><span lang=EN-US
style=';color:black'>(</span><span lang=EN-US style='color:gray'>vcEps</span><span lang=EN-US style=';color:black'>.</span><span
lang=EN-US style=';color:gray'>y</span><span lang=EN-US
style=';color:black'> * </span><span lang=EN-US
style=';color:gray'>fSpeed</span><span lang=EN-US
style=';color:black'>);</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>vcX </span><span lang=EN-US
style=';color:black'>= </span><span lang=EN-US style='color:blue'>D3DXVECTOR3</span><span lang=EN-US style=';
color:black'>(</span><span lang=EN-US style=';color:gray'>m_mtViw</span><span
lang=EN-US style=';color:black'>.</span><span lang=EN-US
style=';color:gray'>_11</span><span lang=EN-US style='color:black'>, </span><span lang=EN-US style=';color:gray'>m_mtViw</span><span
lang=EN-US style=';color:black'>.</span><span lang=EN-US
style=';color:gray'>_21</span><span lang=EN-US style='color:black'>, </span><span lang=EN-US style=';color:gray'>m_mtViw</span><span
lang=EN-US style=';color:black'>.</span><span lang=EN-US
style=';color:gray'>_31</span><span lang=EN-US style='color:black'>);</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>vcY</span><span lang=EN-US
style=';color:black'> = </span><span lang=EN-US
style=';color:blue'>D3DXVECTOR3</span><span lang=EN-US
style=';color:black'>(</span><span lang=EN-US style='color:gray'>m_mtViw</span><span lang=EN-US style=';
color:black'>.</span><span lang=EN-US style=';color:gray'>_12</span><span
lang=EN-US style=';color:black'>, </span><span lang=EN-US
style=';color:gray'>m_mtViw</span><span lang=EN-US
style=';color:black'>.</span><span lang=EN-US style='color:gray'>_22</span><span lang=EN-US style=';color:black'>,
</span><span lang=EN-US style=';color:gray'>m_mtViw</span><span
lang=EN-US style=';color:black'>.</span><span lang=EN-US
style=';color:gray'>_32</span><span lang=EN-US style='color:black'>);</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>vcZ</span><span lang=EN-US
style=';color:black'> = </span><span lang=EN-US
style=';color:gray'>m_vcLook</span><span lang=EN-US
style=';color:black'>-</span><span lang=EN-US style='color:gray'>m_vcEye</span><span lang=EN-US style=';
color:black'>;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:#880000'>D3DXMatrixRotationAxis</span><span
lang=EN-US style=';color:black'>(&amp;</span><span lang=EN-US
style=';color:gray'>rtX</span><span lang=EN-US style='color:black'>, &amp;</span><span lang=EN-US style=';
color:gray'>vcX</span><span lang=EN-US style=';color:black'>, </span><span
lang=EN-US style=';color:gray'>fPitch</span><span lang=EN-US
style=';color:black'>);</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:#880000'>D3DXVec3TransformCoord</span><span
lang=EN-US style=';color:black'>(&amp;</span><span lang=EN-US
style=';color:gray'>vcZ</span><span lang=EN-US style='color:black'>, &amp;</span><span lang=EN-US style=';
color:gray'>vcZ</span><span lang=EN-US style=';color:black'>,
&amp;</span><span lang=EN-US style=';color:gray'>rtX</span><span
lang=EN-US style=';color:black'>);</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:#880000'>D3DXVec3TransformCoord</span><span
lang=EN-US style=';color:black'>(&amp;</span><span lang=EN-US
style=';color:gray'>vcY</span><span lang=EN-US style='color:black'>, &amp;</span><span lang=EN-US style=';
color:gray'>vcY</span><span lang=EN-US style=';color:black'>,
&amp;</span><span lang=EN-US style=';color:gray'>rtX</span><span
lang=EN-US style=';color:black'>);</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>m_vcLook</span><span lang=EN-US
style=';color:black'>= </span><span lang=EN-US style='color:gray'>vcZ</span><span lang=EN-US style=';color:black'>
+ </span><span lang=EN-US style=';color:gray'>m_vcEye</span><span
lang=EN-US style=';color:black'>;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>m_vcUp</span><span lang=EN-US
style=';color:black'>&nbsp; = </span><span lang=EN-US
style=';color:gray'>vcY</span><span lang=EN-US style='color:black'>;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:#880000'>D3DXMatrixLookAtLH</span><span
lang=EN-US style=';color:black'>(&amp;</span><span lang=EN-US
style=';color:gray'>m_mtViw</span><span lang=EN-US
style=';color:black'>, &amp;</span><span lang=EN-US
style=';color:gray'>m_vcEye</span><span lang=EN-US
style=';color:black'>, &amp;</span><span lang=EN-US
style=';color:gray'>m_vcLook</span><span lang=EN-US
style=';color:black'>, &amp;</span><span lang=EN-US
style=';color:gray'>m_vcUp</span><span lang=EN-US
style=';color:black'>);</span></p>

<p class=MsoNormal><span lang=EN-US style=';color:black'>}</span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span style=''>전체 코드는 다음 예제를 살펴 보기 바랍니다<span
lang=EN-US>.</span></span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span><a
href="https://github.com/3dapi/ef01_camera/raw/master/cam22_rotation.zip">cam22_rotation.zip</a></span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:14.0pt;'>2.3
3인칭 카메라</span></p>

<p class=MsoNormal><span>3인칭 카메라는 RPG 게임에서 가장
많이 사용되는 카메라 입니다. 이 카메라는 1인칭 카메라와 거의 같은데 차이점은 Look 벡터가 특정한 위치를 바라보고 있으며 이 지점은
RPG의 경우 보통 주인공 캐릭터의 위치에서 y 축으로 적당한 값을 더해서 정합니다.</span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span><img width=517
height=313 src="https://github.com/3dapi/ef01_camera/raw/master/index.files/image024.gif"></span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span style=''>또한 카메라의 회전은 이<span lang=EN-US>
Look 벡터의 위치를 중심으로 회전이 적용됩니다. 이러한 점을 생각하고 이전의 1인칭 카메라를 수정해서 클래스를 만들려면 멤버 변수들을 추가해야
하는데 쉽게 RPG 게임을 생각한다면 주인공 위치를 가리키는 Basis 벡터, 그리고 y 축에 대한 높이 EpsilonY, 그리고 카메라와 주인공의
위치에 대한 거리 Gap이 필요합니다.</span></span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:blue'>class</span><span lang=EN-US
style=';color:black'> </span><span lang=EN-US style='color:blue'>CMcCamera</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>…</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:blue'>D3DXVECTOR3</span><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>m_vcBasis</span><span lang=EN-US
style=';color:black'>;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:green'>// Look Pos</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:blue'>FLOAT</span><span lang=EN-US
style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>m_fEpslnY</span><span lang=EN-US
style=';color:black'>;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:green'>// Epsilon Y</span></p>

<p class=MsoNormal><span lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:blue'>FLOAT</span><span lang=EN-US
style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>m_fGap</span><span lang=EN-US
style=';color:black'>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:green'>// Distance Between Camera and
Basis</span></p>

<p class=MsoNormal><span>…</span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span>1인칭 카메라의 기준은 카메라의 위치인
Eye 벡터입니다. 회전의 경우 Eye 벡터는 그대로 있고, Look 벡터를 회전 시켰습니다. 3인칭 카메라의 기준은 캐릭터의 위치인
Basis 벡터가 중심입니다. 이 Basis 벡터를 기준으로 Look 벡터를 설정하고, 카메라와 Look의 거리(Gap)로 Eye 벡터를 설정합니다.
초기에 카메라의 Eye와 Look 벡터는 다음과 같이 설정합니다.</span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span>Look = Basis + Float3(
0, EpsilonY, 0);</span></p>

<p class=MsoNormal><span>Eye = Look - Camera
Z axis * Gap;</span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span style=''>만약 휠 마우스가<span lang=EN-US>
zoom in/ zoom out 기능을 한다고 생각해 봅시다. 그러면 zoom in 의 경우 카메라가 Look 벡터 쪽으로 이동해야 하는데 이것을
카메라와 Look의 거리(Gap)를 좁히는 것으로 생각한다면 위의 공식을 그대로 적용할 수 있으며 이것을 코드로 구현하면 다음과 같습니다.</span></span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US>Gap += 휠의 상대적 위치 * speed;</span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US>if(Gap&lt; 카메라의 근접 위치)</span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Gap
= 카메라의 근접 위치;</span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<p class=MsoNormal><span>Eye = Look - Camera
Z axis * Gap;</span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span>DirectX SDK를 이용하면 다음과
같은 코드를 얻어 낼 수 있습니다.</span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span style=''>다음과 같은 간단한 공식을 만들어 낼 수 있습니다<span
lang=EN-US>.</span></span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:blue'>D3DXVECTOR3</span><span
lang=EN-US style=';color:black'> </span><span lang=EN-US
style=';color:gray'>vcDelta</span><span lang=EN-US
style=';color:black'> = </span><span lang=EN-US
style=';color:gray'>g_pApp</span><span lang=EN-US
style=';color:black'>-&gt;</span><span lang=EN-US
style=';color:gray'>m_pInput</span><span lang=EN-US
style=';color:black'>-&gt;</span><span lang=EN-US
style=';color:#880000'>GetMouseEps</span><span lang=EN-US
style=';color:black'>();</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:blue'>if</span><span lang=EN-US
style=';color:black'>(</span><span lang=EN-US style='color:gray'>vcDelta</span><span lang=EN-US style=';
color:black'>.</span><span lang=EN-US style=';color:gray'>z</span><span
lang=EN-US style=';color:black'> != </span><span lang=EN-US
style=';color:red'>0.f</span><span lang=EN-US style='color:black'>)</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>{</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>m_fGap</span><span lang=EN-US
style=';color:black'> += </span><span lang=EN-US
style=';color:gray'>vcDelta</span><span lang=EN-US
style=';color:black'>.</span><span lang=EN-US style='color:gray'>z</span><span lang=EN-US style=';color:black'>*</span><span
lang=EN-US style=';color:red'>0.1f</span><span lang=EN-US
style=';color:black'>;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:blue'>if</span><span lang=EN-US
style=';color:black'>(</span><span lang=EN-US style='color:gray'>m_fGap</span><span lang=EN-US style=';
color:black'>&lt;</span><span lang=EN-US style=';color:red'>50.f</span><span
lang=EN-US style=';color:black'>)</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>m_fGap</span><span lang=EN-US
style=';color:black'> = </span><span lang=EN-US
style=';color:red'>50.f</span><span lang=EN-US style='color:black'>;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:blue'>D3DXVECTOR3</span><span
lang=EN-US style=';color:black'> </span><span lang=EN-US
style=';color:gray'>vcZ</span><span lang=EN-US style='color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = </span><span
lang=EN-US style=';color:blue'>D3DXVECTOR3</span><span
lang=EN-US style=';color:black'>(</span><span lang=EN-US
style=';color:gray'>m_mtViw</span><span lang=EN-US
style=';color:black'>.</span><span lang=EN-US style='color:gray'>_13</span><span lang=EN-US style=';color:black'>,
</span><span lang=EN-US style=';color:gray'>m_mtViw</span><span
lang=EN-US style=';color:black'>.</span><span lang=EN-US
style=';color:gray'>_23</span><span lang=EN-US style='color:black'>, </span><span lang=EN-US style=';color:gray'>m_mtViw</span><span
lang=EN-US style=';color:black'>.</span><span lang=EN-US
style=';color:gray'>_33</span><span lang=EN-US style='color:black'>);</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>m_vcEye</span><span lang=EN-US
style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =
</span><span lang=EN-US style=';color:gray'>m_vcLook</span><span
lang=EN-US style=';color:black'> - </span><span lang=EN-US
style=';color:gray'>vcZ</span><span lang=EN-US style='color:black'>* </span><span lang=EN-US style=';color:gray'>m_fGap</span><span
lang=EN-US style=';color:black'>;</span></p>

<p class=MsoNormal><span lang=EN-US style=';color:black'>}</span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span>3인칭 카메라의 회전을 구현해 봅시다.
앞서 이야기 했듯이 3인칭 카메라는 Basis가 기준입니다. 1인칭과 반대로 Look 벡터는 고정 시킨 다음 Eye 벡터를 Look 벡터를 중심으로
회전 시키는데 1인칭 카메라에서 사용했던 알고리듬 중에서 &quot;</span><span lang=EN-US style='font-family:
바탕체'>vcZ = Look - Eye;</span><span> &quot;</span><span
lang=EN-US style=''> 부분을 </span><span lang=EN-US
style=''>&quot;</span><span>vcZ
= Eye &#8211; Look;</span><span> &quot; </span><span
style=''>으로 고치고<span lang=EN-US>, </span></span><span
lang=EN-US style=''>&quot;</span><span lang=EN-US
style=''>Look = vcZ + Eye;</span><span lang=EN-US
style=''> &quot;</span><span>
부분을 </span><span>&quot;</span><span
lang=EN-US style=''>Eye = vcZ + Look;</span><span lang=EN-US
style=''> &quot; 으로 수정하면 간단히 3인칭 카메라를 만들어 낼 수 있습니다.</span></p>

<p class=MsoNormal><span style=''>알고리듬은 생략하고 회전에 대한 코드만 보여드리겠습니다<span
lang=EN-US>.</span></span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:blue'>void</span><span lang=EN-US
style=';color:black'> </span><span lang=EN-US style='color:blue'>CMcCamera</span><span lang=EN-US style=';
color:black'>::</span><span lang=EN-US style=';color:#880000'>Rotate</span><span
lang=EN-US style=';color:black'>(</span><span lang=EN-US
style=';color:blue'>const</span><span lang=EN-US
style=';color:black'> </span><span lang=EN-US style='color:blue'>D3DXVECTOR3</span><span lang=EN-US style=';
color:black'>* </span><span lang=EN-US style=';color:gray'>vcDelta</span><span
lang=EN-US style=';color:black'>, </span><span lang=EN-US
style=';color:blue'>float</span><span lang=EN-US
style=';color:black'> </span><span lang=EN-US style='color:gray'>fSpeed</span><span lang=EN-US style=';
color:black'>)</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>{</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:blue'>D3DXVECTOR3</span><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>vcEps</span><span lang=EN-US
style=';color:black'> = *</span><span lang=EN-US
style=';color:gray'>vcDelta</span><span lang=EN-US
style=';color:black'>;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:blue'>FLOAT</span><span lang=EN-US
style=';color:black'> </span><span lang=EN-US style='color:gray'>fYaw</span><span lang=EN-US style=';color:black'>;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:blue'>FLOAT</span><span lang=EN-US
style=';color:black'> </span><span lang=EN-US style='color:gray'>fPitch</span><span lang=EN-US style=';
color:black'>;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:blue'>D3DXVECTOR3</span><span
lang=EN-US style=';color:black'> </span><span lang=EN-US
style=';color:gray'>vcZ</span><span lang=EN-US style='color:black'>;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:blue'>D3DXVECTOR3</span><span
lang=EN-US style=';color:black'> </span><span lang=EN-US
style=';color:gray'>vcY</span><span lang=EN-US style='color:black'>;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:blue'>D3DXVECTOR3</span><span
lang=EN-US style=';color:black'> </span><span lang=EN-US
style=';color:gray'>vcX</span><span lang=EN-US style='color:black'>;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:blue'>D3DXMATRIX</span><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>rtY</span><span lang=EN-US
style=';color:black'>;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:blue'>D3DXMATRIX</span><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>rtX</span><span lang=EN-US
style=';color:black'>;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:green'>// 월드 좌표 y 축에 대한 회전</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>fYaw</span><span lang=EN-US
style=';color:black'>&nbsp;&nbsp;&nbsp; = </span><span
lang=EN-US style=';color:#A000A0'>D3DXToRadian</span><span
lang=EN-US style=';color:black'>(</span><span lang=EN-US
style=';color:gray'>vcEps</span><span lang=EN-US
style=';color:black'>.</span><span lang=EN-US style='color:gray'>x</span><span lang=EN-US style=';color:black'> *
</span><span lang=EN-US style=';color:red'>0.1f</span><span
lang=EN-US style=';color:black'>);</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:#880000'>D3DXMatrixRotationY</span><span
lang=EN-US style=';color:black'>(&amp;</span><span lang=EN-US
style=';color:gray'>rtY</span><span lang=EN-US style='color:black'>, </span><span lang=EN-US style=';color:gray'>fYaw</span><span
lang=EN-US style=';color:black'>);</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>vcZ</span><span lang=EN-US
style=';color:black'> = </span><span lang=EN-US
style=';color:gray'>m_vcEye</span><span lang=EN-US
style=';color:black'> - </span><span lang=EN-US
style=';color:gray'>m_vcLook</span><span lang=EN-US
style=';color:black'>;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>vcY</span><span lang=EN-US
style=';color:black'> = </span><span lang=EN-US
style=';color:blue'>D3DXVECTOR3</span><span lang=EN-US
style=';color:black'>(</span><span lang=EN-US style='color:gray'>m_mtViw</span><span lang=EN-US style=';
color:black'>.</span><span lang=EN-US style=';color:gray'>_12</span><span
lang=EN-US style=';color:black'>, </span><span lang=EN-US
style=';color:gray'>m_mtViw</span><span lang=EN-US
style=';color:black'>.</span><span lang=EN-US style='color:gray'>_22</span><span lang=EN-US style=';color:black'>,
</span><span lang=EN-US style=';color:gray'>m_mtViw</span><span
lang=EN-US style=';color:black'>.</span><span lang=EN-US
style=';color:gray'>_32</span><span lang=EN-US style='color:black'>);</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:#880000'>D3DXVec3TransformCoord</span><span
lang=EN-US style=';color:black'>(&amp;</span><span lang=EN-US
style=';color:gray'>vcZ</span><span lang=EN-US style='color:black'>, &amp;</span><span lang=EN-US style=';
color:gray'>vcZ</span><span lang=EN-US style=';color:black'>,
&amp;</span><span lang=EN-US style=';color:gray'>rtY</span><span
lang=EN-US style=';color:black'>);</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:#880000'>D3DXVec3TransformCoord</span><span
lang=EN-US style=';color:black'>(&amp;</span><span lang=EN-US
style=';color:gray'>vcY</span><span lang=EN-US style='color:black'>, &amp;</span><span lang=EN-US style=';
color:gray'>vcY</span><span lang=EN-US style=';color:black'>,
&amp;</span><span lang=EN-US style=';color:gray'>rtY</span><span
lang=EN-US style=';color:black'>);</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>m_vcEye</span><span lang=EN-US
style=';color:black'> = </span><span lang=EN-US
style=';color:gray'>m_vcLook</span><span lang=EN-US
style=';color:black'> + </span><span lang=EN-US
style=';color:gray'>vcZ</span><span lang=EN-US style='color:black'>;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>m_vcUp</span><span lang=EN-US
style=';color:black'>&nbsp; = </span><span lang=EN-US
style=';color:gray'>vcY</span><span lang=EN-US style='color:black'>;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:#880000'>D3DXMatrixLookAtLH</span><span
lang=EN-US style=';color:black'>(&amp;</span><span lang=EN-US
style=';color:gray'>m_mtViw</span><span lang=EN-US
style=';color:black'>, &amp;</span><span lang=EN-US
style=';color:gray'>m_vcEye</span><span lang=EN-US
style=';color:black'>, &amp;</span><span lang=EN-US
style=';color:gray'>m_vcLook</span><span lang=EN-US
style=';color:black'>, &amp;</span><span lang=EN-US
style=';color:gray'>m_vcUp</span><span lang=EN-US
style=';color:black'>);</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:green'>// 카메라의 x 축에 대한 회전</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>fPitch</span><span lang=EN-US
style=';color:black'>= </span><span lang=EN-US style='color:#A000A0'>D3DXToRadian</span><span lang=EN-US style=';
color:black'>(</span><span lang=EN-US style=';color:gray'>vcEps</span><span
lang=EN-US style=';color:black'>.</span><span lang=EN-US
style=';color:gray'>y</span><span lang=EN-US style='color:black'> * </span><span lang=EN-US style=';color:red'>0.1f</span><span
lang=EN-US style=';color:black'>);</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>vcZ</span><span lang=EN-US
style=';color:black'> = </span><span lang=EN-US
style=';color:gray'>m_vcEye</span><span lang=EN-US
style=';color:black'> - </span><span lang=EN-US
style=';color:gray'>m_vcLook</span><span lang=EN-US
style=';color:black'>;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>vcY</span><span lang=EN-US
style=';color:black'> = </span><span lang=EN-US
style=';color:blue'>D3DXVECTOR3</span><span lang=EN-US
style=';color:black'>(</span><span lang=EN-US style='color:gray'>m_mtViw</span><span lang=EN-US style=';
color:black'>.</span><span lang=EN-US style=';color:gray'>_12</span><span
lang=EN-US style=';color:black'>, </span><span lang=EN-US
style=';color:gray'>m_mtViw</span><span lang=EN-US
style=';color:black'>.</span><span lang=EN-US style='color:gray'>_22</span><span lang=EN-US style=';color:black'>,
</span><span lang=EN-US style=';color:gray'>m_mtViw</span><span
lang=EN-US style=';color:black'>.</span><span lang=EN-US
style=';color:gray'>_32</span><span lang=EN-US style='color:black'>);</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>vcX</span><span lang=EN-US
style=';color:black'> = </span><span lang=EN-US
style=';color:blue'>D3DXVECTOR3</span><span lang=EN-US
style=';color:black'>(</span><span lang=EN-US style='color:gray'>m_mtViw</span><span lang=EN-US style=';
color:black'>.</span><span lang=EN-US style=';color:gray'>_11</span><span
lang=EN-US style=';color:black'>, </span><span lang=EN-US
style=';color:gray'>m_mtViw</span><span lang=EN-US
style=';color:black'>.</span><span lang=EN-US style='color:gray'>_21</span><span lang=EN-US style=';color:black'>,
</span><span lang=EN-US style=';color:gray'>m_mtViw</span><span
lang=EN-US style=';color:black'>.</span><span lang=EN-US
style=';color:gray'>_31</span><span lang=EN-US style='color:black'>);</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:#880000'>D3DXMatrixRotationAxis</span><span
lang=EN-US style=';color:black'>(&amp;</span><span lang=EN-US
style=';color:gray'>rtX</span><span lang=EN-US style='color:black'>, &amp; </span><span lang=EN-US style=';
color:gray'>vcX</span><span lang=EN-US style=';color:black'>, </span><span
lang=EN-US style=';color:gray'>fPitch</span><span lang=EN-US
style=';color:black'>);</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:#880000'>D3DXVec3TransformCoord</span><span
lang=EN-US style=';color:black'>(&amp;</span><span lang=EN-US
style=';color:gray'>vcZ</span><span lang=EN-US style='color:black'>, &amp;</span><span lang=EN-US style=';
color:gray'>vcZ</span><span lang=EN-US style=';color:black'>,
&amp;</span><span lang=EN-US style=';color:gray'>rtX</span><span
lang=EN-US style=';color:black'>);</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:#880000'>D3DXVec3TransformCoord</span><span
lang=EN-US style=';color:black'>(&amp;</span><span lang=EN-US
style=';color:gray'>vcY</span><span lang=EN-US style='color:black'>, &amp;</span><span lang=EN-US style=';
color:gray'>vcY</span><span lang=EN-US style=';color:black'>,
&amp;</span><span lang=EN-US style=';color:gray'>rtX</span><span
lang=EN-US style=';color:black'>);</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>m_vcEye</span><span lang=EN-US
style=';color:black'> = </span><span lang=EN-US
style=';color:gray'>m_vcLook</span><span lang=EN-US
style=';color:black'> + </span><span lang=EN-US
style=';color:gray'>vcZ</span><span lang=EN-US style='color:black'>;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>m_vcUp</span><span lang=EN-US
style=';color:black'>&nbsp; = </span><span lang=EN-US
style=';color:gray'>vcY</span><span lang=EN-US style='color:black'>;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:#880000'>D3DXMatrixLookAtLH</span><span
lang=EN-US style=';color:black'>(&amp;</span><span lang=EN-US
style=';color:gray'>m_mtViw</span><span lang=EN-US
style=';color:black'>, &amp;</span><span lang=EN-US
style=';color:gray'>m_vcEye</span><span lang=EN-US
style=';color:black'>, &amp;</span><span lang=EN-US
style=';color:gray'>m_vcLook</span><span lang=EN-US
style=';color:black'>, &amp;</span><span lang=EN-US
style=';color:gray'>m_vcUp</span><span lang=EN-US
style=';color:black'>);</span></p>

<p class=MsoNormal><span lang=EN-US style=';color:black'>}</span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span style=''>전체 코드는 다음 예제를 살펴 보기 바랍니다<span
lang=EN-US>.</span></span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span><a
href="https://github.com/3dapi/ef01_camera/raw/master/cam23_third.zip">cam23_third.zip</a></span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:14.0pt;'>2.4
충돌 검사를 위한 카메라 Frustum</span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span><img width=549
height=245 src="https://github.com/3dapi/ef01_camera/raw/master/index.files/image025.gif"></span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span style=''>여러 개의<span lang=EN-US> 3D 물체를 가지고
장면을 연출하게 된다면 렌더링 속도의 문제를 피해 갈 수 없습니다. 따라서 적절히 카메라 영역인 View Frustum 밖에 있는 물체들을 제거
해야 하는데 이 경우 렌더링 판정을 위해 뷰 영역인 View Frustum과 충돌 검사를 진행 합니다. 카메라 클래스는 이 View
Frustum을 충돌 검사를 쉽게 할 수 있도록 평면의 방정식 형태로 만들어서 제공합니다.</span></span></p>

<p class=MsoNormal><span style=''>다음 그림과 같이<span lang=EN-US>
View Frustum의 6면체 법선 벡터를 Up 벡터(<sub><img border=0 width=24 height=26
src="https://github.com/3dapi/ef01_camera/raw/master/index.files/image026.gif"></sub>), Down 벡터(<sub><img border=0 width=36
height=24 src="https://github.com/3dapi/ef01_camera/raw/master/index.files/image027.gif"></sub>), Left 벡터(<sub><img border=0
width=27 height=24 src="https://github.com/3dapi/ef01_camera/raw/master/index.files/image028.gif"></sub>), Right 벡터(<sub><img
border=0 width=32 height=26 src="https://github.com/3dapi/ef01_camera/raw/master/index.files/image029.gif"></sub>), Near 벡터(<sub><img
border=0 width=31 height=24 src="https://github.com/3dapi/ef01_camera/raw/master/index.files/image030.gif"></sub>), Far 벡터(<sub><img
border=0 width=25 height=24 src="https://github.com/3dapi/ef01_camera/raw/master/index.files/image031.gif"></sub>)로 가정하고 이 벡터와 각
면에 대한 평면의 방정식 <sub><img border=0 width=79 height=23
src="https://github.com/3dapi/ef01_camera/raw/master/index.files/image032.gif"></sub>에 대한 법선 값과 d 값을 구해 보겠습니다.</span></span></p>

<p class=MsoNormal><span><sub><img border=0
width=31 height=24 src="https://github.com/3dapi/ef01_camera/raw/master/index.files/image030.gif"></sub>&nbsp;와 <sub><img
border=0 width=25 height=24 src="https://github.com/3dapi/ef01_camera/raw/master/index.files/image031.gif"></sub>&nbsp;벡터는 쉽게 구할
수 있는데 Far 벡터는 카메라의 z 축 벡터와 평행합니다. Near 벡터는 카메라의 z 벡터와 방향이 반대이므로 다음과 같이 구할 수 있습니다.</span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span><sub><img border=0
width=31 height=24 src="https://github.com/3dapi/ef01_camera/raw/master/index.files/image030.gif"></sub>&nbsp;= -<sub><img
border=0 width=43 height=24 src="https://github.com/3dapi/ef01_camera/raw/master/index.files/image033.gif"></sub></span></p>

<p class=MsoNormal><span><sub><img border=0
width=25 height=24 src="https://github.com/3dapi/ef01_camera/raw/master/index.files/image034.gif"></sub>&nbsp;= <sub><img
border=0 width=43 height=24 src="https://github.com/3dapi/ef01_camera/raw/master/index.files/image033.gif"></sub></span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span style=''>충돌 프로그램에서 평면의 방정식을 <span
lang=EN-US><sub><img border=0 width=79 height=23 src="https://github.com/3dapi/ef01_camera/raw/master/index.files/image032.gif"></sub>&nbsp;으로
정한다면 각 평면Near 평면의 방정식에서는 다음과 같은 식이 성립됩니다.</span></span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span><sub><img border=0
width=238 height=52 src="https://github.com/3dapi/ef01_camera/raw/master/index.files/image035.gif"></sub></span></p>

<p class=MsoNormal><span><sub><img border=0
width=260 height=54 src="https://github.com/3dapi/ef01_camera/raw/master/index.files/image036.gif"></sub></span></p>

<p class=MsoNormal><span><sub><img border=0
width=289 height=54 src="https://github.com/3dapi/ef01_camera/raw/master/index.files/image037.gif"></sub></span></p>

<p class=MsoNormal><span><sub><img border=0
width=193 height=54 src="https://github.com/3dapi/ef01_camera/raw/master/index.files/image038.gif"></sub></span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span>Far 평면의 방정식도 위와 거의 동일하게
풀이됩니다.</span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span><sub><img border=0
width=213 height=52 src="https://github.com/3dapi/ef01_camera/raw/master/index.files/image039.gif"></sub></span></p>

<p class=MsoNormal><span><sub><img border=0
width=229 height=54 src="https://github.com/3dapi/ef01_camera/raw/master/index.files/image040.gif"></sub></span></p>

<p class=MsoNormal><span><sub><img border=0
width=244 height=54 src="https://github.com/3dapi/ef01_camera/raw/master/index.files/image041.gif"></sub></span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span style=''>카메라 뷰 영역의 모든 점은 뷰와 투영 변환을 거치면<span
lang=EN-US>(-1, -1,0) ~ (1,1,1) 범위의 값을 갖는데 (-1, -1, 0), (-1, 1, 0), (1, 1, 0),
(1, -1, 0) 네 점을 뷰 행렬과 투영 행렬 곱의 역행렬을 통해서 3차원으로 전환한 다음 카메라의 위치를 이용해서 Up 평면, Down 평면
Left 평면, Right 평면을 다음과 같이 구합니다.</span></span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span>(-1, -1, 0)', (-1,
1, 0)', (1, 1, 0)', (1, -1, 0)' 네 점이 뷰 행렬 * 투영 행렬의 역행렬을 통해서 변환된 값이라 하면</span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span>Left 평면은 (-1, 1,
0)', (-1, -1, 0)', 카메라 위치(Eye), 세 점으로 구합니다.</span></p>

<p class=MsoNormal><span>Right 평면은 (1, -1,
0)', (1, 1, 0)', 카메라 위치(Eye), 세 점으로 구합니다.</span></p>

<p class=MsoNormal><span>Up 평면은 (1, 1, 0)',
(-1, 1, 0)', 카메라 위치(Eye), 세 점으로 구합니다.</span></p>

<p class=MsoNormal><span>Down 평면은 (-1, -1,
0)', (1, -1, 0)', 카메라 위치(Eye), 세 점으로 구합니다.</span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span style=''>이것을 의사 코드로 구현하면 다음과 같습니다<span
lang=EN-US>.</span></span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US>1. </span><span style=''>뷰와 투영
행렬의 곱의 역행렬을 구한다<span lang=EN-US>.</span></span></p>

<p class=MsoNormal><span>Matrix ViewProjInv
= View Matrix * Projection Matrix;</span></p>

<p class=MsoNormal><span>ViewProjInv = InverseMatrix(ViewProjInv
);</span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span>2. (-1,</span><span
lang=EN-US> -1, 0), (-1, 1, 0), (1, 1, 0), (1, -1, 0)을 변환한다.</span></p>

<p class=MsoNormal><span lang=EN-US>A = Transform(</span><span lang=EN-US
style=''>ViewProjInv, (-1,</span><span lang=EN-US> -1, 0));</span></p>

<p class=MsoNormal><span lang=EN-US>B = Transform(</span><span lang=EN-US
style=''>ViewProjInv, (-1,&nbsp; </span><span lang=EN-US>1, 0));</span></p>

<p class=MsoNormal><span lang=EN-US>C = Transform(</span><span lang=EN-US
style=''>ViewProjInv, ( 1,</span><span lang=EN-US>&nbsp; 1, 0));</span></p>

<p class=MsoNormal><span lang=EN-US>D = Transform(</span><span lang=EN-US
style=''>ViewProjInv, ( 1,</span><span lang=EN-US> -1, 0));</span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US>3. Left, Right, Up, Down 평면의 방정식을 각각의 세 점을 이용해서
구한다.</span></p>

<p class=MsoNormal><span>Left 평면:
PlaneFromPoints(B, A, Eye)</span></p>

<p class=MsoNormal><span>Right 평면:
PlaneFromPoints(D, C, Eye)</span></p>

<p class=MsoNormal><span>Up 평면:
PlaneFromPoints(C, B, Eye)</span></p>

<p class=MsoNormal><span>Down 평면:
PlaneFromPoints(A, D, Eye)</span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span style=''>여기서<span lang=EN-US>
PlaneFromPoints() 함수는 세 점이 주어졌을 때 평면을 구하는 함수라 가정합니다. 만약 DirectX SDK 를 사용한다면
D3DXPlaneFromPoints() 함수로 변경이 가능하고 Frustum은 다음과 같이 구현 됩니다.</span></span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:blue'>void</span><span lang=EN-US
style=';color:black'> </span><span lang=EN-US style='color:blue'>CMcCamera</span><span lang=EN-US style=';
color:black'>::</span><span lang=EN-US style=';color:#880000'>UpdateMatrix</span><span
lang=EN-US style=';color:black'>()</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>{</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:blue'>D3DXMATRIX</span><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>mtVPInv</span><span lang=EN-US
style=';color:black'>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:green'>// View * Projection Inverse
Matrix</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>mtVPInv</span><span lang=EN-US
style=';color:black'> = </span><span lang=EN-US
style=';color:gray'>m_mtViw</span><span lang=EN-US
style=';color:black'> * </span><span lang=EN-US
style=';color:gray'>m_mtPrj</span><span lang=EN-US
style=';color:black'>;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:#880000'>D3DXMatrixInverse</span><span
lang=EN-US style=';color:black'>(&amp;</span><span lang=EN-US
style=';color:gray'>mtVPInv</span><span lang=EN-US
style=';color:black'>, </span><span lang=EN-US style='color:#A000A0'>NULL</span><span lang=EN-US style=';
color:black'>, &amp;</span><span lang=EN-US style=';color:gray'>mtVPInv</span><span
lang=EN-US style=';color:black'>);</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:blue'>D3DXVECTOR3</span><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>vcZ</span><span lang=EN-US
style=';color:black'>&nbsp; = </span><span lang=EN-US
style=';color:blue'>D3DXVECTOR3</span><span lang=EN-US
style=';color:black'>(</span><span lang=EN-US style='color:gray'>m_mtViw</span><span lang=EN-US style=';
color:black'>.</span><span lang=EN-US style=';color:gray'>_13</span><span
lang=EN-US style=';color:black'>, </span><span lang=EN-US
style=';color:gray'>m_mtViw</span><span lang=EN-US
style=';color:black'>.</span><span lang=EN-US style='color:gray'>_23</span><span lang=EN-US style=';color:black'>,
</span><span lang=EN-US style=';color:gray'>m_mtViw</span><span
lang=EN-US style=';color:black'>.</span><span lang=EN-US
style=';color:gray'>_33</span><span lang=EN-US style='color:black'>);</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:blue'>FLOAT</span><span lang=EN-US
style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>Near</span><span lang=EN-US
style=';color:black'> = </span><span lang=EN-US
style=';color:gray'>m_fNear</span><span lang=EN-US
style=';color:black'>;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:blue'>FLOAT</span><span lang=EN-US
style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>Far</span><span lang=EN-US
style=';color:black'>&nbsp; = </span><span lang=EN-US
style=';color:gray'>m_fFar</span><span lang=EN-US
style=';color:black'>;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:blue'>D3DXVECTOR3</span><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>vcEye</span><span lang=EN-US
style=';color:black'>= </span><span lang=EN-US style='color:gray'>m_vcEye</span><span lang=EN-US style=';
color:black'>;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:green'>// 1. Near Plane</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:blue'>D3DXVECTOR3</span><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>vcNear</span><span lang=EN-US
style=';color:black'>;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:blue'>FLOAT</span><span lang=EN-US
style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>Dnear</span><span lang=EN-US
style=';color:black'>;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>vcNear</span><span lang=EN-US
style=';color:black'> = -</span><span lang=EN-US
style=';color:gray'>vcZ</span><span lang=EN-US style='color:black'>;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>Dnear</span><span lang=EN-US
style=';color:black'>&nbsp; = -</span><span lang=EN-US
style=';color:#880000'>D3DXVec3Dot</span><span lang=EN-US
style=';color:black'>(&amp;</span><span lang=EN-US
style=';color:gray'>vcNear</span><span lang=EN-US
style=';color:black'>, &amp;</span><span lang=EN-US
style=';color:gray'>vcEye</span><span lang=EN-US
style=';color:black'>) + </span><span lang=EN-US
style=';color:gray'>Near</span><span lang=EN-US
style=';color:black'>;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>m_Frst</span><span lang=EN-US
style=';color:black'>[</span><span lang=EN-US style='color:red'>0</span><span lang=EN-US style=';color:black'>] =
</span><span lang=EN-US style=';color:blue'>D3DXPLANE</span><span
lang=EN-US style=';color:black'>(</span><span lang=EN-US
style=';color:gray'>vcNear</span><span lang=EN-US
style=';color:black'>.</span><span lang=EN-US style='color:gray'>x</span><span lang=EN-US style=';color:black'>, </span><span
lang=EN-US style=';color:gray'>vcNear</span><span lang=EN-US
style=';color:black'>.</span><span lang=EN-US style='color:gray'>y</span><span lang=EN-US style=';color:black'>, </span><span
lang=EN-US style=';color:gray'>vcNear</span><span lang=EN-US
style=';color:black'>.</span><span lang=EN-US style='color:gray'>z</span><span lang=EN-US style=';color:black'>, </span><span
lang=EN-US style=';color:gray'>Dnear</span><span lang=EN-US
style=';color:black'>);</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:green'>// 2. Far Plane</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:blue'>D3DXVECTOR3</span><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>vcFar</span><span lang=EN-US
style=';color:black'>;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:blue'>FLOAT</span><span lang=EN-US
style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>Dfar</span><span lang=EN-US
style=';color:black'>;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>vcFar</span><span lang=EN-US
style=';color:black'> = </span><span lang=EN-US
style=';color:gray'>vcZ</span><span lang=EN-US style='color:black'>;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>Dfar</span><span lang=EN-US
style=';color:black'>&nbsp; = -</span><span lang=EN-US
style=';color:#880000'>D3DXVec3Dot</span><span lang=EN-US
style=';color:black'>(&amp;</span><span lang=EN-US
style=';color:gray'>vcFar</span><span lang=EN-US
style=';color:black'>, &amp;</span><span lang=EN-US
style=';color:gray'>vcEye</span><span lang=EN-US
style=';color:black'>) - </span><span lang=EN-US
style=';color:gray'>Far</span><span lang=EN-US style='color:black'>;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>m_Frst</span><span lang=EN-US
style=';color:black'>[</span><span lang=EN-US style='color:red'>1</span><span lang=EN-US style=';color:black'>] =
</span><span lang=EN-US style=';color:blue'>D3DXPLANE</span><span
lang=EN-US style=';color:black'>(</span><span lang=EN-US
style=';color:gray'>vcFar</span><span lang=EN-US
style=';color:black'>.</span><span lang=EN-US style='color:gray'>x</span><span lang=EN-US style=';color:black'>, </span><span
lang=EN-US style=';color:gray'>vcFar</span><span lang=EN-US
style=';color:black'>.</span><span lang=EN-US style='color:gray'>y</span><span lang=EN-US style=';color:black'>, </span><span
lang=EN-US style=';color:gray'>vcFar</span><span lang=EN-US
style=';color:black'>.</span><span lang=EN-US style='color:gray'>z</span><span lang=EN-US style=';color:black'>, </span><span
lang=EN-US style=';color:gray'>Dfar</span><span lang=EN-US
style=';color:black'>);</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:green'>// 3. Left, Right, Up, Down 평면</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:blue'>D3DXVECTOR3</span><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>vcPyr</span><span lang=EN-US
style=';color:black'>[</span><span lang=EN-US style='color:red'>4</span><span lang=EN-US style=';color:black'>];&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:green'>// 피라밋 꼭지점 4개</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>vcPyr</span><span lang=EN-US
style=';color:black'>[</span><span lang=EN-US style='color:red'>0</span><span lang=EN-US style=';color:black'>] =
</span><span lang=EN-US style=';color:blue'>D3DXVECTOR3</span><span
lang=EN-US style=';color:black'>(-</span><span lang=EN-US
style=';color:red'>1.f</span><span lang=EN-US style='color:black'>, -</span><span lang=EN-US style=';color:red'>1.f</span><span
lang=EN-US style=';color:black'>, </span><span lang=EN-US
style=';color:red'>0.f</span><span lang=EN-US style='color:black'>);</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>vcPyr</span><span lang=EN-US
style=';color:black'>[</span><span lang=EN-US style='color:red'>1</span><span lang=EN-US style=';color:black'>] =
</span><span lang=EN-US style=';color:blue'>D3DXVECTOR3</span><span
lang=EN-US style=';color:black'>(-</span><span lang=EN-US
style=';color:red'>1.f</span><span lang=EN-US style='color:black'>,&nbsp; </span><span lang=EN-US style=';
color:red'>1.f</span><span lang=EN-US style=';color:black'>, </span><span
lang=EN-US style=';color:red'>0.f</span><span lang=EN-US
style=';color:black'>);</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>vcPyr</span><span lang=EN-US
style=';color:black'>[</span><span lang=EN-US style='color:red'>2</span><span lang=EN-US style=';color:black'>] =
</span><span lang=EN-US style=';color:blue'>D3DXVECTOR3</span><span
lang=EN-US style=';color:black'>( </span><span lang=EN-US
style=';color:red'>1.f</span><span lang=EN-US style='color:black'>,&nbsp; </span><span lang=EN-US style=';
color:red'>1.f</span><span lang=EN-US style=';color:black'>, </span><span
lang=EN-US style=';color:red'>0.f</span><span lang=EN-US
style=';color:black'>);</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>vcPyr</span><span lang=EN-US
style=';color:black'>[</span><span lang=EN-US style='color:red'>3</span><span lang=EN-US style=';color:black'>] =
</span><span lang=EN-US style=';color:blue'>D3DXVECTOR3</span><span
lang=EN-US style=';color:black'>( </span><span lang=EN-US
style=';color:red'>1.f</span><span lang=EN-US style='color:black'>, -</span><span lang=EN-US style=';color:red'>1.f</span><span
lang=EN-US style=';color:black'>, </span><span lang=EN-US
style=';color:red'>0.f</span><span lang=EN-US style='color:black'>);</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:green'>// Un Projection, Un View</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:blue'>for</span><span lang=EN-US
style=';color:black'>(</span><span lang=EN-US style='color:blue'>int</span><span lang=EN-US style=';color:black'>
</span><span lang=EN-US style=';color:gray'>i</span><span
lang=EN-US style=';color:black'> = </span><span lang=EN-US
style=';color:red'>0</span><span lang=EN-US style='color:black'>; </span><span lang=EN-US style=';color:gray'>i</span><span
lang=EN-US style=';color:black'> &lt; </span><span lang=EN-US
style=';color:red'>4</span><span lang=EN-US style='color:black'>; ++</span><span lang=EN-US style=';color:gray'>i</span><span
lang=EN-US style=';color:black'>)</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:#880000'>D3DXVec3TransformCoord</span><span
lang=EN-US style=';color:black'>( &amp;</span><span lang=EN-US
style=';color:gray'>vcPyr</span><span lang=EN-US
style=';color:black'>[</span><span lang=EN-US style='color:gray'>i</span><span lang=EN-US style=';color:black'>],
&amp;</span><span lang=EN-US style=';color:gray'>vcPyr</span><span
lang=EN-US style=';color:black'>[</span><span lang=EN-US
style=';color:gray'>i</span><span lang=EN-US style='color:black'>], &amp;</span><span lang=EN-US style=';
color:gray'>mtVPInv</span><span lang=EN-US style=';color:black'>);</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:green'>// 3. 얻어진 월드좌표로 Frustum 평면을 만든다.
벡터는 안에서 밖으로 나가는 방향.</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:#880000'>D3DXPlaneFromPoints</span><span
lang=EN-US style=';color:black'>(&amp;</span><span lang=EN-US
style=';color:gray'>m_Frst</span><span lang=EN-US
style=';color:black'>[</span><span lang=EN-US style='color:red'>2</span><span lang=EN-US style=';color:black'>], </span><span
lang=EN-US style=';color:gray'>vcPyr</span><span lang=EN-US
style=';color:black'>+</span><span lang=EN-US style='color:red'>0</span><span lang=EN-US style=';color:black'>, </span><span
lang=EN-US style=';color:gray'>vcPyr</span><span lang=EN-US
style=';color:black'>+</span><span lang=EN-US style='color:red'>1</span><span lang=EN-US style=';color:black'>,
&amp;</span><span lang=EN-US style=';color:gray'>vcEye</span><span
lang=EN-US style=';color:black'>);&nbsp;&nbsp; </span><span
lang=EN-US style=';color:green'>// (left)</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:#880000'>D3DXPlaneFromPoints</span><span
lang=EN-US style=';color:black'>(&amp;</span><span lang=EN-US
style=';color:gray'>m_Frst</span><span lang=EN-US
style=';color:black'>[</span><span lang=EN-US style='color:red'>3</span><span lang=EN-US style=';color:black'>], </span><span
lang=EN-US style=';color:gray'>vcPyr</span><span lang=EN-US
style=';color:black'>+</span><span lang=EN-US style='color:red'>2</span><span lang=EN-US style=';color:black'>, </span><span
lang=EN-US style=';color:gray'>vcPyr</span><span lang=EN-US
style=';color:black'>+</span><span lang=EN-US style='color:red'>3</span><span lang=EN-US style=';color:black'>,
&amp;</span><span lang=EN-US style=';color:gray'>vcEye</span><span
lang=EN-US style=';color:black'>);&nbsp;&nbsp; </span><span
lang=EN-US style=';color:green'>// (right)</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:#880000'>D3DXPlaneFromPoints</span><span
lang=EN-US style=';color:black'>(&amp;</span><span lang=EN-US
style=';color:gray'>m_Frst</span><span lang=EN-US
style=';color:black'>[</span><span lang=EN-US style='color:red'>4</span><span lang=EN-US style=';color:black'>], </span><span
lang=EN-US style=';color:gray'>vcPyr</span><span lang=EN-US
style=';color:black'>+</span><span lang=EN-US style='color:red'>1</span><span lang=EN-US style=';color:black'>, </span><span
lang=EN-US style=';color:gray'>vcPyr</span><span lang=EN-US
style=';color:black'>+</span><span lang=EN-US style='color:red'>2</span><span lang=EN-US style=';color:black'>,
&amp;</span><span lang=EN-US style=';color:gray'>vcEye</span><span
lang=EN-US style=';color:black'>);&nbsp;&nbsp; </span><span
lang=EN-US style=';color:green'>// (up)</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:#880000'>D3DXPlaneFromPoints</span><span
lang=EN-US style=';color:black'>(&amp;</span><span lang=EN-US
style=';color:gray'>m_Frst</span><span lang=EN-US
style=';color:black'>[</span><span lang=EN-US style='color:red'>5</span><span lang=EN-US style=';color:black'>], </span><span
lang=EN-US style=';color:gray'>vcPyr</span><span lang=EN-US
style=';color:black'>+</span><span lang=EN-US style='color:red'>3</span><span lang=EN-US style=';color:black'>, </span><span
lang=EN-US style=';color:gray'>vcPyr</span><span lang=EN-US
style=';color:black'>+</span><span lang=EN-US style='color:red'>0</span><span lang=EN-US style=';color:black'>,
&amp;</span><span lang=EN-US style=';color:gray'>vcEye</span><span
lang=EN-US style=';color:black'>);&nbsp;&nbsp; </span><span
lang=EN-US style=';color:green'>// (down)</span></p>

<p class=MsoNormal><span lang=EN-US style=';color:black'>}</span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span style=''>전체 코드는 다음 예제를 살펴 보기 바랍니다<span
lang=EN-US>.</span></span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span><a
href="https://github.com/3dapi/ef01_camera/raw/master/cam24_frustum.zip">cam24_frustum.zip</a></span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:16.0pt;'>3.
카메라 응용</span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:14.0pt;'>3.1
빌보드 효과</span></p>

<p class=MsoNormal><span style=''>빌보드 효과는<span lang=EN-US> 3차원의 평면이
카메라의 회전이나 이동에 상관 없이 항상 같은 면을 바라보게 드는 기술입니다. 빌보드 효과를 만드는 방법은 크게 2가지 방법이 있는데 하나는 행렬을
이용하는 방법과 카메라의 축을 이용하는 방법이 있습니다.</span></span></p>

<p class=MsoNormal><span style=''>먼저 행렬을 이용한 방법을 살펴보겠습니다<span
lang=EN-US>. 만약 우리가 디바이스에 뷰 행렬을 설정하지 않는다면 화면은 월드 좌표의 (-1, -1, 0) ~(1,1,0) 범위의 정점을
연출합니다. 정점의 변환은 월드 행렬 * 뷰 행렬 * 투영 행렬의 행렬을 이용한 변환과 일치하는데 만약 월드 행렬 * 뷰의 역행렬 * 뷰 행렬
* 투영 행렬의 행렬을 이용한 변환을 거친다면 월드 행렬 * 투영 행렬 변환과 동일하게 되어 월드 좌표의 (-1, -1, 0) ~(1,1,0)
범위의 정점만 그리게 됩니다.</span></span></p>

<p class=MsoNormal><span style=''>이것을 잘 이용한다면 빌보드 효과를 만들어 낼 수 있습니다<span
lang=EN-US>. 즉, 장면을 구성할 물체의 위치를 월드 좌표 x 축과 y 축에 평행하도록 구성합니다. 그리고, 뷰의 역행렬에서 _41,
_42, _43 값을 0으로 설정해서 이를 빌보드 행렬이라 한 다음, 정점의 위치를 빌보드 행렬을 통해서 변환합니다.</span></span></p>

<p class=MsoNormal><span style=''>이 과정을 의사 코드로 만들면 다음과 같습니다<span
lang=EN-US>.</span></span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span>1. 카메라의 뷰 행렬의 역행렬을 통해서
_41, _42, _43 변수 값을 0으로 만들어 빌보드 행렬을 얻는다.</span></p>

<p class=MsoNormal><span>BillBoardMatrix =
Inverse(View Materix);</span></p>

<p class=MsoNormal><span>BillBoardMatrix._41
= 0;</span></p>

<p class=MsoNormal><span>BillBoardMatrix._42
= 0;</span></p>

<p class=MsoNormal><span>BillBoardMatrix._43
= 0;</span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span>2. 물체의 위치를 월드 좌표의 x
축과 y 축에 평행하도록 설정한다.</span></p>

<p class=MsoNormal><span>Vtx[0].position = Float3(-1,
-1, 0);</span></p>

<p class=MsoNormal><span>Vtx[1].position = Float3(-1,
&nbsp;1, 0);</span></p>

<p class=MsoNormal><span>Vtx[2].position = Float3(
1, &nbsp;1, 0);</span></p>

<p class=MsoNormal><span>Vtx[3].position = Float3(
1, -1, 0);</span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span>3. 빌보드 행렬을 통해서 이 물체의
위치를 이동 시킨다.</span></p>

<p class=MsoNormal><span>Vtx[0].p += 물체 위치;</span></p>

<p class=MsoNormal><span>Vtx[1].p += 물체 위치;</span></p>

<p class=MsoNormal><span>Vtx[2].p += 물체 위치;</span></p>

<p class=MsoNormal><span>Vtx[3].p += 물체 위치;</span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span style=''>다음은 이미지의 크기에 비례해서 빌보드 효과를<span
lang=EN-US> DirectX SDK를 이용해서 구현한 예제입니다.</span></span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:blue'>INT</span><span lang=EN-US
style=';color:black'> </span><span lang=EN-US style='color:blue'>CMcBillboard</span><span lang=EN-US style=';
color:black'>::</span><span lang=EN-US style=';color:#880000'>FrameMove</span><span
lang=EN-US style=';color:black'>()</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>{</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:blue'>D3DXMATRIX</span><span
lang=EN-US style=';color:black'> </span><span lang=EN-US
style=';color:gray'>mtBill</span><span lang=EN-US
style=';color:black'>;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>m_pDev</span><span lang=EN-US
style=';color:black'>-&gt;</span><span lang=EN-US
style=';color:#880000'>GetTransform</span><span lang=EN-US
style=';color:black'>(</span><span lang=EN-US style='color:#A000A0'>D3DTS_VIEW</span><span lang=EN-US style=';
color:black'>, &amp;</span><span lang=EN-US style=';color:gray'>mtBill</span><span
lang=EN-US style=';color:black'>);</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:#880000'>D3DXMatrixInverse</span><span
lang=EN-US style=';color:black'>(&amp;</span><span lang=EN-US
style=';color:gray'>mtBill</span><span lang=EN-US
style=';color:black'>, </span><span lang=EN-US style='color:red'>0</span><span lang=EN-US style=';color:black'>,
&amp;</span><span lang=EN-US style=';color:gray'>mtBill</span><span
lang=EN-US style=';color:black'>);</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>mtBill</span><span lang=EN-US
style=';color:black'>.</span><span lang=EN-US style='color:gray'>_41</span><span lang=EN-US style=';color:black'>
= </span><span lang=EN-US style=';color:red'>0</span><span
lang=EN-US style=';color:black'>;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>mtBill</span><span lang=EN-US
style=';color:black'>.</span><span lang=EN-US style='color:gray'>_42</span><span lang=EN-US style=';color:black'>
= </span><span lang=EN-US style=';color:red'>0</span><span
lang=EN-US style=';color:black'>;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>mtBill</span><span lang=EN-US
style=';color:black'>.</span><span lang=EN-US style='color:gray'>_43</span><span lang=EN-US style=';color:black'>
= </span><span lang=EN-US style=';color:red'>0</span><span
lang=EN-US style=';color:black'>;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:blue'>FLOAT</span><span lang=EN-US
style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>fX</span><span lang=EN-US
style=';color:black'>;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:blue'>FLOAT</span><span lang=EN-US
style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>fY</span><span lang=EN-US
style=';color:black'>;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:blue'>D3DXVECTOR3</span><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>Vtx</span><span lang=EN-US
style=';color:black'>[</span><span lang=EN-US style='color:red'>4</span><span lang=EN-US style=';color:black'>];</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:blue'>D3DXVECTOR3</span><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>vcTmp</span><span lang=EN-US
style=';color:black'>;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>fX</span><span lang=EN-US
style=';color:black'> = </span><span lang=EN-US
style=';color:gray'>m_pImg</span><span lang=EN-US
style=';color:black'>.</span><span lang=EN-US style='color:gray'>Width</span><span lang=EN-US style=';color:black'>*
</span><span lang=EN-US style=';color:red'>2</span><span
lang=EN-US style=';color:black'>.f;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>fY</span><span lang=EN-US
style=';color:black'> = </span><span lang=EN-US
style=';color:gray'>m_pImg</span><span lang=EN-US
style=';color:black'>.</span><span lang=EN-US style='color:gray'>Height</span><span lang=EN-US style=';
color:black'>* </span><span lang=EN-US style=';color:red'>2</span><span
lang=EN-US style=';color:black'>.f;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>Vtx</span><span lang=EN-US
style=';color:black'>[</span><span lang=EN-US style='color:red'>0</span><span lang=EN-US style=';color:black'>] =
</span><span lang=EN-US style=';color:blue'>D3DXVECTOR3</span><span
lang=EN-US style=';color:black'>(-</span><span lang=EN-US
style=';color:gray'>fX</span><span lang=EN-US style='color:black'>,-</span><span lang=EN-US style=';color:gray'>fY</span><span
lang=EN-US style=';color:black'>, </span><span lang=EN-US
style=';color:red'>0</span><span lang=EN-US style='color:black'>);</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>Vtx</span><span lang=EN-US
style=';color:black'>[</span><span lang=EN-US style='color:red'>1</span><span lang=EN-US style=';color:black'>] =
</span><span lang=EN-US style=';color:blue'>D3DXVECTOR3</span><span
lang=EN-US style=';color:black'>(-</span><span lang=EN-US
style=';color:gray'>fX</span><span lang=EN-US style='color:black'>, </span><span lang=EN-US style=';color:gray'>fY</span><span
lang=EN-US style=';color:black'>, </span><span lang=EN-US
style=';color:red'>0</span><span lang=EN-US style='color:black'>);</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>Vtx</span><span lang=EN-US
style=';color:black'>[</span><span lang=EN-US style='color:red'>2</span><span lang=EN-US style=';color:black'>] =
</span><span lang=EN-US style=';color:blue'>D3DXVECTOR3</span><span
lang=EN-US style=';color:black'>( </span><span lang=EN-US
style=';color:gray'>fX</span><span lang=EN-US style='color:black'>, </span><span lang=EN-US style=';color:gray'>fY</span><span
lang=EN-US style=';color:black'>, </span><span lang=EN-US
style=';color:red'>0</span><span lang=EN-US style='color:black'>);</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>Vtx</span><span lang=EN-US
style=';color:black'>[</span><span lang=EN-US style='color:red'>3</span><span lang=EN-US style=';color:black'>] =
</span><span lang=EN-US style=';color:blue'>D3DXVECTOR3</span><span
lang=EN-US style=';color:black'>( </span><span lang=EN-US
style=';color:gray'>fX</span><span lang=EN-US style='color:black'>,-</span><span lang=EN-US style=';color:gray'>fY</span><span
lang=EN-US style=';color:black'>, </span><span lang=EN-US
style=';color:red'>0</span><span lang=EN-US style='color:black'>);</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:#880000'>D3DXVec3TransformCoord</span><span
lang=EN-US style=';color:black'>(&amp;</span><span lang=EN-US
style=';color:gray'>m_pVtx</span><span lang=EN-US
style=';color:black'>[</span><span lang=EN-US style='color:red'>0</span><span lang=EN-US style=';color:black'>].</span><span
lang=EN-US style=';color:gray'>p</span><span lang=EN-US
style=';color:black'>, &amp;</span><span lang=EN-US
style=';color:gray'>Vtx</span><span lang=EN-US style='color:black'>[</span><span lang=EN-US style=';color:red'>0</span><span
lang=EN-US style=';color:black'>], &amp;</span><span lang=EN-US
style=';color:gray'>mtBill</span><span lang=EN-US
style=';color:black'>);</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:#880000'>D3DXVec3TransformCoord</span><span
lang=EN-US style=';color:black'>(&amp;</span><span lang=EN-US
style=';color:gray'>m_pVtx</span><span lang=EN-US
style=';color:black'>[</span><span lang=EN-US style='color:red'>1</span><span lang=EN-US style=';color:black'>].</span><span
lang=EN-US style=';color:gray'>p</span><span lang=EN-US
style=';color:black'>, &amp;</span><span lang=EN-US
style=';color:gray'>Vtx</span><span lang=EN-US style='color:black'>[</span><span lang=EN-US style=';color:red'>1</span><span
lang=EN-US style=';color:black'>], &amp;</span><span lang=EN-US
style=';color:gray'>mtBill</span><span lang=EN-US
style=';color:black'>);</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:#880000'>D3DXVec3TransformCoord</span><span
lang=EN-US style=';color:black'>(&amp;</span><span lang=EN-US
style=';color:gray'>m_pVtx</span><span lang=EN-US
style=';color:black'>[</span><span lang=EN-US style='color:red'>2</span><span lang=EN-US style=';color:black'>].</span><span
lang=EN-US style=';color:gray'>p</span><span lang=EN-US
style=';color:black'>, &amp;</span><span lang=EN-US
style=';color:gray'>Vtx</span><span lang=EN-US style='color:black'>[</span><span lang=EN-US style=';color:red'>2</span><span
lang=EN-US style=';color:black'>], &amp;</span><span lang=EN-US
style=';color:gray'>mtBill</span><span lang=EN-US
style=';color:black'>);</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:#880000'>D3DXVec3TransformCoord</span><span
lang=EN-US style=';color:black'>(&amp;</span><span lang=EN-US
style=';color:gray'>m_pVtx</span><span lang=EN-US
style=';color:black'>[</span><span lang=EN-US style='color:red'>3</span><span lang=EN-US style=';color:black'>].</span><span
lang=EN-US style=';color:gray'>p</span><span lang=EN-US
style=';color:black'>, &amp;</span><span lang=EN-US
style=';color:gray'>Vtx</span><span lang=EN-US style='color:black'>[</span><span lang=EN-US style=';color:red'>3</span><span
lang=EN-US style=';color:black'>], &amp;</span><span lang=EN-US
style=';color:gray'>mtBill</span><span lang=EN-US
style=';color:black'>);</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>m_pVtx</span><span lang=EN-US
style=';color:black'>[</span><span lang=EN-US style='color:red'>0</span><span lang=EN-US style=';color:black'>].</span><span
lang=EN-US style=';color:gray'>p</span><span lang=EN-US
style=';color:black'> += </span><span lang=EN-US
style=';color:gray'>m_vcPos</span><span lang=EN-US
style=';color:black'>;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>m_pVtx</span><span lang=EN-US
style=';color:black'>[</span><span lang=EN-US style='color:red'>1</span><span lang=EN-US style=';color:black'>].</span><span
lang=EN-US style=';color:gray'>p</span><span lang=EN-US
style=';color:black'> += </span><span lang=EN-US
style=';color:gray'>m_vcPos</span><span lang=EN-US
style=';color:black'>;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>m_pVtx</span><span lang=EN-US
style=';color:black'>[</span><span lang=EN-US style='color:red'>2</span><span lang=EN-US style=';color:black'>].</span><span
lang=EN-US style=';color:gray'>p</span><span lang=EN-US
style=';color:black'> += </span><span lang=EN-US
style=';color:gray'>m_vcPos</span><span lang=EN-US
style=';color:black'>;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>m_pVtx</span><span lang=EN-US
style=';color:black'>[</span><span lang=EN-US style='color:red'>3</span><span lang=EN-US style=';color:black'>].</span><span
lang=EN-US style=';color:gray'>p</span><span lang=EN-US
style=';color:black'> += </span><span lang=EN-US
style=';color:gray'>m_vcPos</span><span lang=EN-US
style=';color:black'>;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>m_pVtx</span><span lang=EN-US
style=';color:black'>[</span><span lang=EN-US style='color:red'>0</span><span lang=EN-US style=';color:black'>].</span><span
lang=EN-US style=';color:gray'>p</span><span lang=EN-US
style=';color:black'>.</span><span lang=EN-US style='color:gray'>y</span><span lang=EN-US style=';color:black'>
+= </span><span lang=EN-US style=';color:gray'>fY</span><span
lang=EN-US style=';color:black'> * </span><span lang=EN-US
style=';color:red'>1.f</span><span lang=EN-US style='color:black'>;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>m_pVtx</span><span lang=EN-US
style=';color:black'>[</span><span lang=EN-US style='color:red'>1</span><span lang=EN-US style=';color:black'>].</span><span
lang=EN-US style=';color:gray'>p</span><span lang=EN-US
style=';color:black'>.</span><span lang=EN-US style='color:gray'>y</span><span lang=EN-US style=';color:black'>
+= </span><span lang=EN-US style=';color:gray'>fY</span><span
lang=EN-US style=';color:black'> * </span><span lang=EN-US
style=';color:red'>1.f</span><span lang=EN-US style='color:black'>;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>m_pVtx</span><span lang=EN-US
style=';color:black'>[</span><span lang=EN-US style='color:red'>2</span><span lang=EN-US style=';color:black'>].</span><span
lang=EN-US style=';color:gray'>p</span><span lang=EN-US
style=';color:black'>.</span><span lang=EN-US style='color:gray'>y</span><span lang=EN-US style=';color:black'>
+= </span><span lang=EN-US style=';color:gray'>fY</span><span
lang=EN-US style=';color:black'> * </span><span lang=EN-US
style=';color:red'>1.f</span><span lang=EN-US style='color:black'>;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>m_pVtx</span><span lang=EN-US
style=';color:black'>[</span><span lang=EN-US style='color:red'>3</span><span lang=EN-US style=';color:black'>].</span><span
lang=EN-US style=';color:gray'>p</span><span lang=EN-US
style=';color:black'>.</span><span lang=EN-US style='color:gray'>y</span><span lang=EN-US style=';color:black'>
+= </span><span lang=EN-US style=';color:gray'>fY</span><span
lang=EN-US style=';color:black'> * </span><span lang=EN-US
style=';color:red'>1.f</span><span lang=EN-US style='color:black'>;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:blue'>return</span><span lang=EN-US
style=';color:black'> </span><span lang=EN-US style='color:red'>0</span><span lang=EN-US style=';color:black'>;</span></p>

<p class=MsoNormal><span lang=EN-US style=';color:black'>}</span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span style=''>전체 코드는 다음 예제를 이용하기 바랍니다<span
lang=EN-US>.</span></span></p>

<p class=MsoNormal><span><a
href="https://github.com/3dapi/ef01_camera/raw/master/cam31_Bill0_Transform0.zip">cam31_Bill0_Transform0.zip</a></span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span style=''>다음 예제는 빌보드를 이용해서 숲을 구현한 예제입니다<span
lang=EN-US>.</span></span></p>

<p class=MsoNormal><span><img border=0
width=300 height=225 src="https://github.com/3dapi/ef01_camera/raw/master/index.files/image042.jpg"></span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span><a
href="https://github.com/3dapi/ef01_camera/raw/master/cam31_Bill0_Transform1.zip">cam31_Bill0_Transform1.zip</a></span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span style=''>행렬을 이용하지 않고 카메라의<span
lang=EN-US> x, y 축을 이용하면 항상 빌보드 평면이 카메라의 z 축과 일치하므로 바로 빌보드 효과를 만들어 낼 수 있습니다. 카메라의
x, y 축 방향 벡터에 적당한 크기를 곱해 이것을 물체의 위치에 더하면 바로 빌보드 효과를 만들어 낼 수 있습니다.</span></span></p>

<p class=MsoNormal><span style=''>이것을 의사 코드로 구현하면 다음과 같습니다<span
lang=EN-US>.</span></span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span>1. 뷰 행렬에서 카메라의 x, y
축 벡터를 얻는다.</span></p>

<p class=MsoNormal><span>Float3 vcX = Float3(mtView._11,
mtView._21, mtView._31);</span></p>

<p class=MsoNormal><span>Float3 vcY = Float3(mtView._12,
mtView._22, mtView._32);</span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span>2. x, y 축에 적당한 값을 곱한다.</span></p>

<p class=MsoNormal><span>vcX *= fW;</span></p>

<p class=MsoNormal><span>vcY *= fH;</span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span>3. 빌보드를 표현하는 물체의 정점
위치 4점을 설정한다.</span></p>

<p class=MsoNormal><span>Vtx[0].p = 물체의 중심 위치
- (vcX - vcY);</span></p>

<p class=MsoNormal><span>Vtx[1].p = 물체의 중심 위치
+ (vcX + vcY);</span></p>

<p class=MsoNormal><span>Vtx[2].p = 물체의 중심 위치
- (vcX + vcY);</span></p>

<p class=MsoNormal><span>Vtx[3].p = 물체의 중심 위치
+ (vcX - vcY);</span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span style=''>다음 예제는 카메라의<span lang=EN-US>
x, y 축을 이용한 빌보드 효과를 폭발 효과에 적용한 코드 이며 전체 예제의 실행 후 'R' 키를 누르면 폭발이 실행 됩니다.</span></span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:blue'>INT</span><span lang=EN-US
style=';color:black'> </span><span lang=EN-US style='color:blue'>CEftExplose</span><span lang=EN-US style=';
color:black'>::</span><span lang=EN-US style=';color:#880000'>FrameMove</span><span
lang=EN-US style=';color:black'>()</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>{</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:blue'>if</span><span lang=EN-US
style=';color:black'>(</span><span lang=EN-US style='color:gray'>g_pApp</span><span lang=EN-US style=';
color:black'>-&gt;</span><span lang=EN-US style=';color:gray'>m_pInput</span><span
lang=EN-US style=';color:black'>-&gt;</span><span lang=EN-US
style=';color:#880000'>KeyDown</span><span lang=EN-US
style=';color:black'>(</span><span lang=EN-US style='color:fuchsia'>'R'</span><span lang=EN-US style=';
color:black'>))</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:#880000'>Set</span><span lang=EN-US
style=';color:black'>();</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:blue'>if</span><span lang=EN-US
style=';color:black'>(!</span><span lang=EN-US style='color:gray'>m_bRn</span><span lang=EN-US style=';color:black'>)</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:blue'>return</span><span lang=EN-US
style=';color:black'> </span><span lang=EN-US style='color:red'>0</span><span lang=EN-US style=';color:black'>;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:blue'>INT</span><span lang=EN-US
style=';color:black'> </span><span lang=EN-US style='color:gray'>i</span><span lang=EN-US style=';color:black'>;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:blue'>for</span><span lang=EN-US
style=';color:black'>(</span><span lang=EN-US style='color:gray'>i</span><span lang=EN-US style=';color:black'>=</span><span
lang=EN-US style=';color:red'>0</span><span lang=EN-US
style=';color:black'>; </span><span lang=EN-US style='color:gray'>i</span><span lang=EN-US style=';color:black'>&lt;</span><span
lang=EN-US style=';color:gray'>m_iN</span><span lang=EN-US
style=';color:black'>; ++</span><span lang=EN-US
style=';color:gray'>i</span><span lang=EN-US style='color:black'>)</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>m_pPrt</span><span lang=EN-US
style=';color:black'>[</span><span lang=EN-US style='color:gray'>i</span><span lang=EN-US style=';color:black'>].</span><span
lang=EN-US style=';color:gray'>a</span><span lang=EN-US
style=';color:black'> = -</span><span lang=EN-US
style=';color:gray'>m_pPrt</span><span lang=EN-US
style=';color:black'>[</span><span lang=EN-US style='color:gray'>i</span><span lang=EN-US style=';color:black'>].</span><span
lang=EN-US style=';color:gray'>v</span><span lang=EN-US
style=';color:black'>*</span><span lang=EN-US style='color:red'>0</span><span lang=EN-US style=';color:black'>.</span><span
lang=EN-US style=';color:red'>01f</span><span lang=EN-US
style=';color:black'>;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>m_pPrt</span><span lang=EN-US
style=';color:black'>[</span><span lang=EN-US style='color:gray'>i</span><span lang=EN-US style=';color:black'>].</span><span
lang=EN-US style=';color:gray'>v</span><span lang=EN-US
style=';color:black'>&nbsp;&nbsp;&nbsp; += </span><span
lang=EN-US style=';color:gray'>m_pPrt</span><span lang=EN-US
style=';color:black'>[</span><span lang=EN-US style='color:gray'>i</span><span lang=EN-US style=';color:black'>].</span><span
lang=EN-US style=';color:gray'>a</span><span lang=EN-US
style=';color:black'>;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>m_pPrt</span><span lang=EN-US
style=';color:black'>[</span><span lang=EN-US style='color:gray'>i</span><span lang=EN-US style=';color:black'>].</span><span
lang=EN-US style=';color:gray'>p</span><span lang=EN-US
style=';color:black'>&nbsp;&nbsp;&nbsp; += </span><span
lang=EN-US style=';color:gray'>m_pPrt</span><span lang=EN-US
style=';color:black'>[</span><span lang=EN-US style='color:gray'>i</span><span lang=EN-US style=';color:black'>].</span><span
lang=EN-US style=';color:gray'>v</span><span lang=EN-US
style=';color:black'>;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:green'>// for Billboard</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:blue'>D3DXMATRIX</span><span
lang=EN-US style=';color:black'> </span><span lang=EN-US
style=';color:gray'>mtView</span><span lang=EN-US
style=';color:black'>;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>m_pDev</span><span lang=EN-US
style=';color:black'>-&gt;</span><span lang=EN-US
style=';color:#880000'>GetTransform</span><span lang=EN-US
style=';color:black'>(</span><span lang=EN-US style='color:#A000A0'>D3DTS_VIEW</span><span lang=EN-US style=';
color:black'>, &amp;</span><span lang=EN-US style=';color:gray'>mtView</span><span
lang=EN-US style=';color:black'>);</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:blue'>for</span><span lang=EN-US
style=';color:black'>(</span><span lang=EN-US style='color:gray'>i</span><span lang=EN-US style=';color:black'>=</span><span
lang=EN-US style=';color:red'>0</span><span lang=EN-US
style=';color:black'>; </span><span lang=EN-US style='color:gray'>i</span><span lang=EN-US style=';color:black'>&lt;</span><span
lang=EN-US style=';color:gray'>m_iN</span><span lang=EN-US
style=';color:black'>; ++</span><span lang=EN-US
style=';color:gray'>i</span><span lang=EN-US style='color:black'>)</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:blue'>D3DXVECTOR3</span><span
lang=EN-US style=';color:black'> </span><span lang=EN-US
style=';color:#880000'>vcX</span><span lang=EN-US
style=';color:black'>(</span><span lang=EN-US style='color:gray'>mtView</span><span lang=EN-US style=';
color:black'>.</span><span lang=EN-US style=';color:gray'>_11</span><span
lang=EN-US style=';color:black'>, </span><span lang=EN-US
style=';color:gray'>mtView</span><span lang=EN-US
style=';color:black'>.</span><span lang=EN-US style='color:gray'>_21</span><span lang=EN-US style=';color:black'>,
</span><span lang=EN-US style=';color:gray'>mtView</span><span
lang=EN-US style=';color:black'>.</span><span lang=EN-US
style=';color:gray'>_31</span><span lang=EN-US style='color:black'>);</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:blue'>D3DXVECTOR3</span><span
lang=EN-US style=';color:black'> </span><span lang=EN-US
style=';color:#880000'>vcY</span><span lang=EN-US
style=';color:black'>(</span><span lang=EN-US style='color:gray'>mtView</span><span lang=EN-US style=';
color:black'>.</span><span lang=EN-US style=';color:gray'>_12</span><span
lang=EN-US style=';color:black'>, </span><span lang=EN-US
style=';color:gray'>mtView</span><span lang=EN-US
style=';color:black'>.</span><span lang=EN-US style='color:gray'>_22</span><span lang=EN-US style=';color:black'>,
</span><span lang=EN-US style=';color:gray'>mtView</span><span
lang=EN-US style=';color:black'>.</span><span lang=EN-US
style=';color:gray'>_32</span><span lang=EN-US style='color:black'>);</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>vcX</span><span lang=EN-US
style=';color:black'> *= </span><span lang=EN-US
style=';color:gray'>m_pPrt</span><span lang=EN-US
style=';color:black'>[</span><span lang=EN-US style='color:gray'>i</span><span lang=EN-US style=';color:black'>].</span><span
lang=EN-US style=';color:gray'>fW</span><span lang=EN-US
style=';color:black'>;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>vcY</span><span lang=EN-US
style=';color:black'> *= </span><span lang=EN-US
style=';color:gray'>m_pPrt</span><span lang=EN-US
style=';color:black'>[</span><span lang=EN-US style='color:gray'>i</span><span lang=EN-US style=';color:black'>].</span><span
lang=EN-US style=';color:gray'>fH</span><span lang=EN-US
style=';color:black'>;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>m_pVtx</span><span lang=EN-US
style=';color:black'>[</span><span lang=EN-US style='color:gray'>i</span><span lang=EN-US style=';color:black'>*</span><span
lang=EN-US style=';color:red'>6</span><span lang=EN-US
style=';color:black'> +</span><span lang=EN-US style='color:red'>0</span><span lang=EN-US style=';color:black'>].</span><span
lang=EN-US style=';color:gray'>d</span><span lang=EN-US
style=';color:black'> = </span><span lang=EN-US
style=';color:gray'>m_pPrt</span><span lang=EN-US
style=';color:black'>[</span><span lang=EN-US style='color:gray'>i</span><span lang=EN-US style=';color:black'>].</span><span
lang=EN-US style=';color:gray'>c</span><span lang=EN-US
style=';color:black'>;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>m_pVtx</span><span lang=EN-US
style=';color:black'>[</span><span lang=EN-US style='color:gray'>i</span><span lang=EN-US style=';color:black'>*</span><span
lang=EN-US style=';color:red'>6</span><span lang=EN-US
style=';color:black'> +</span><span lang=EN-US style='color:red'>1</span><span lang=EN-US style=';color:black'>].</span><span
lang=EN-US style=';color:gray'>d</span><span lang=EN-US
style=';color:black'> = </span><span lang=EN-US
style=';color:gray'>m_pPrt</span><span lang=EN-US
style=';color:black'>[</span><span lang=EN-US style='color:gray'>i</span><span lang=EN-US style=';color:black'>].</span><span
lang=EN-US style=';color:gray'>c</span><span lang=EN-US
style=';color:black'>;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>m_pVtx</span><span lang=EN-US
style=';color:black'>[</span><span lang=EN-US style='color:gray'>i</span><span lang=EN-US style=';color:black'>*</span><span
lang=EN-US style=';color:red'>6</span><span lang=EN-US
style=';color:black'> +</span><span lang=EN-US style='color:red'>2</span><span lang=EN-US style=';color:black'>].</span><span
lang=EN-US style=';color:gray'>d</span><span lang=EN-US
style=';color:black'> = </span><span lang=EN-US
style=';color:gray'>m_pPrt</span><span lang=EN-US
style=';color:black'>[</span><span lang=EN-US style='color:gray'>i</span><span lang=EN-US style=';color:black'>].</span><span
lang=EN-US style=';color:gray'>c</span><span lang=EN-US
style=';color:black'>;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>m_pVtx</span><span lang=EN-US
style=';color:black'>[</span><span lang=EN-US style='color:gray'>i</span><span lang=EN-US style=';color:black'>*</span><span
lang=EN-US style=';color:red'>6</span><span lang=EN-US
style=';color:black'> +</span><span lang=EN-US style='color:red'>3</span><span lang=EN-US style=';color:black'>].</span><span
lang=EN-US style=';color:gray'>d</span><span lang=EN-US
style=';color:black'> = </span><span lang=EN-US
style=';color:gray'>m_pPrt</span><span lang=EN-US
style=';color:black'>[</span><span lang=EN-US style='color:gray'>i</span><span lang=EN-US style=';color:black'>].</span><span
lang=EN-US style=';color:gray'>c</span><span lang=EN-US
style=';color:black'>;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>m_pVtx</span><span lang=EN-US
style=';color:black'>[</span><span lang=EN-US style='color:gray'>i</span><span lang=EN-US style=';color:black'>*</span><span
lang=EN-US style=';color:red'>6</span><span lang=EN-US
style=';color:black'> +</span><span lang=EN-US style='color:red'>0</span><span lang=EN-US style=';color:black'>].</span><span
lang=EN-US style=';color:gray'>p</span><span lang=EN-US
style=';color:black'> = </span><span lang=EN-US
style=';color:gray'>m_pPrt</span><span lang=EN-US
style=';color:black'>[</span><span lang=EN-US style='color:gray'>i</span><span lang=EN-US style=';color:black'>].</span><span
lang=EN-US style=';color:gray'>p</span><span lang=EN-US
style=';color:black'> - (</span><span lang=EN-US
style=';color:gray'>vcX</span><span lang=EN-US style='color:black'> - </span><span lang=EN-US style=';color:gray'>vcY</span><span
lang=EN-US style=';color:black'>);</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>m_pVtx</span><span lang=EN-US
style=';color:black'>[</span><span lang=EN-US style='color:gray'>i</span><span lang=EN-US style=';color:black'>*</span><span
lang=EN-US style=';color:red'>6</span><span lang=EN-US
style=';color:black'> +</span><span lang=EN-US style='color:red'>1</span><span lang=EN-US style=';color:black'>].</span><span
lang=EN-US style=';color:gray'>p</span><span lang=EN-US
style=';color:black'> = </span><span lang=EN-US
style=';color:gray'>m_pPrt</span><span lang=EN-US
style=';color:black'>[</span><span lang=EN-US style='color:gray'>i</span><span lang=EN-US style=';color:black'>].</span><span
lang=EN-US style=';color:gray'>p</span><span lang=EN-US
style=';color:black'> + (</span><span lang=EN-US
style=';color:gray'>vcX</span><span lang=EN-US style='color:black'> + </span><span lang=EN-US style=';color:gray'>vcY</span><span
lang=EN-US style=';color:black'>);</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>m_pVtx</span><span lang=EN-US
style=';color:black'>[</span><span lang=EN-US style='color:gray'>i</span><span lang=EN-US style=';color:black'>*</span><span
lang=EN-US style=';color:red'>6</span><span lang=EN-US
style=';color:black'> +</span><span lang=EN-US style='color:red'>2</span><span lang=EN-US style=';color:black'>].</span><span
lang=EN-US style=';color:gray'>p</span><span lang=EN-US
style=';color:black'> = </span><span lang=EN-US
style=';color:gray'>m_pPrt</span><span lang=EN-US
style=';color:black'>[</span><span lang=EN-US style='color:gray'>i</span><span lang=EN-US style=';color:black'>].</span><span
lang=EN-US style=';color:gray'>p</span><span lang=EN-US
style=';color:black'> - (</span><span lang=EN-US
style=';color:gray'>vcX</span><span lang=EN-US style='color:black'> + </span><span lang=EN-US style=';color:gray'>vcY</span><span
lang=EN-US style=';color:black'>);</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>m_pVtx</span><span lang=EN-US
style=';color:black'>[</span><span lang=EN-US style='color:gray'>i</span><span lang=EN-US style=';color:black'>*</span><span
lang=EN-US style=';color:red'>6</span><span lang=EN-US
style=';color:black'> +</span><span lang=EN-US style='color:red'>3</span><span lang=EN-US style=';color:black'>].</span><span
lang=EN-US style=';color:gray'>p</span><span lang=EN-US
style=';color:black'> = </span><span lang=EN-US
style=';color:gray'>m_pPrt</span><span lang=EN-US
style=';color:black'>[</span><span lang=EN-US style='color:gray'>i</span><span lang=EN-US style=';color:black'>].</span><span
lang=EN-US style=';color:gray'>p</span><span lang=EN-US
style=';color:black'> + (</span><span lang=EN-US
style=';color:gray'>vcX</span><span lang=EN-US style='color:black'> - </span><span lang=EN-US style=';color:gray'>vcY</span><span
lang=EN-US style=';color:black'>);</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>m_pVtx</span><span lang=EN-US
style=';color:black'>[</span><span lang=EN-US style='color:gray'>i</span><span lang=EN-US style=';color:black'>*</span><span
lang=EN-US style=';color:red'>6</span><span lang=EN-US
style=';color:black'> +</span><span lang=EN-US style='color:red'>4</span><span lang=EN-US style=';color:black'>] =
</span><span lang=EN-US style=';color:gray'>m_pVtx</span><span
lang=EN-US style=';color:black'>[</span><span lang=EN-US
style=';color:gray'>i</span><span lang=EN-US style='color:black'>*</span><span lang=EN-US style=';color:red'>6</span><span
lang=EN-US style=';color:black'> + </span><span lang=EN-US
style=';color:red'>2</span><span lang=EN-US style='color:black'>];</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>m_pVtx</span><span lang=EN-US
style=';color:black'>[</span><span lang=EN-US style='color:gray'>i</span><span lang=EN-US style=';color:black'>*</span><span
lang=EN-US style=';color:red'>6</span><span lang=EN-US
style=';color:black'> +</span><span lang=EN-US style='color:red'>5</span><span lang=EN-US style=';color:black'>] =
</span><span lang=EN-US style=';color:gray'>m_pVtx</span><span
lang=EN-US style=';color:black'>[</span><span lang=EN-US
style=';color:gray'>i</span><span lang=EN-US style='color:black'>*</span><span lang=EN-US style=';color:red'>6</span><span
lang=EN-US style=';color:black'> + </span><span lang=EN-US
style=';color:red'>1</span><span lang=EN-US style='color:black'>];</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:blue'>return</span><span lang=EN-US
style=';color:black'> </span><span lang=EN-US style='color:red'>0</span><span lang=EN-US style=';color:black'>;</span></p>

<p class=MsoNormal><span lang=EN-US style=';color:black'>}</span></p>

<p class=MsoNormal><span lang=EN-US style=';color:black'>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US style=';color:black'><img
border=0 width=300 height=225 src="https://github.com/3dapi/ef01_camera/raw/master/index.files/image043.jpg"></span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span><a
href="https://github.com/3dapi/ef01_camera/raw/master/cam31_Bill1_CamAxis.zip">cam31_Bill1_CamAxis.zip</a></span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span style=''>빌보드를 구현 할 수 있으면 이 빌보드에 텍스처 애니메이션을
적용하면 적절한 효과를 만들어 낼 수 있습니다<span lang=EN-US>. 이에 대한 내용은 어려움이 없기 때문에 설명은 생략하겠습니다.</span></span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span><img border=0
width=300 height=225 src="https://github.com/3dapi/ef01_camera/raw/master/index.files/image044.jpg"></span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span><a
href="https://github.com/3dapi/ef01_camera/raw/master/cam31_Bill2_TextureAni.zip">cam31_Bill2_TextureAni.zip</a></span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:14.0pt;'>3.2
다중 카메라(Multi-Camera)</span></p>

<p class=MsoNormal><span style=''>축구<span lang=EN-US>, 골프, 야구 등 스포츠
게임의 경우처럼 게임에서 때로는 다양한 각도의 카메라가 지원이 되어 TV 중계와 같은 효과를 연출 하는 경우가 많습니다. 이 때 필요한 것이 다중
카메라 인데, 다중 카메라는 방송국에서 여러 대의 카메라를 가지고 적절하게 장면을 섞어서 영상을 송출 하듯이 게임 카메라 인스턴스를 여러 개 만들어서
카메라 매니저를 통해서 3D 장면을 연출하는 것입니다.</span></span></p>

<p class=MsoNormal><span style=''>따라서 카메라 인스턴스를 관리할 매니저 클래스가 필요합니다<span
lang=EN-US>.</span></span></p>

<p class=MsoNormal><span style=''>다음과 같이 카메라 매니저 클래스를 만들고 이 클래스에
적절한 카메라 인스턴스 포인터를 설정합니다<span lang=EN-US>.</span></span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:blue'>class</span><span lang=EN-US
style=';color:black'> </span><span lang=EN-US style='color:blue'>CMcCamManager</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>{</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:blue'>public</span><span lang=EN-US
style=';color:black'>:</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:blue'>CMcCamera</span><span lang=EN-US
style=';color:black'>*&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>m_pCam0</span><span lang=EN-US
style=';color:black'> ;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:blue'>CMcCamera</span><span lang=EN-US
style=';color:black'>*&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>m_pCam1</span><span lang=EN-US
style=';color:black'> ;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:blue'>CMcCamera</span><span lang=EN-US
style=';color:black'>*&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>m_pCam2</span><span lang=EN-US
style=';color:black'> ;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:blue'>CMcCamera</span><span lang=EN-US
style=';color:black'>*&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>m_pCam3</span><span lang=EN-US
style=';color:black'> ;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:blue'>CMcCamera</span><span lang=EN-US
style=';color:black'>*&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>m_pCam4</span><span lang=EN-US
style=';color:black'> ;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:blue'>public</span><span lang=EN-US
style=';color:black'>:</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:blue'>CMcCamManager</span><span
lang=EN-US style=';color:black'>();</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:blue'>virtual</span><span lang=EN-US
style=';color:black'> ~</span><span lang=EN-US style='color:blue'>CMcCamManager</span><span lang=EN-US style=';
color:black'>();</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:blue'>INT</span><span lang=EN-US
style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:#880000'>Create</span><span lang=EN-US
style=';color:black'>(</span><span lang=EN-US style='color:blue'>LPDIRECT3DDEVICE9</span><span lang=EN-US style='color:black'>);</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:blue'>void</span><span lang=EN-US
style=';color:black'>&nbsp;&nbsp;&nbsp; </span><span lang=EN-US
style=';color:#880000'>Destroy</span><span lang=EN-US
style=';color:black'>();</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:blue'>INT</span><span lang=EN-US
style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:#880000'>FrameMove</span><span
lang=EN-US style=';color:black'>();</span></p>

<p class=MsoNormal><span lang=EN-US style=';color:black'>};</span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span style=''>위의 카메라 매니저 클래스는 총<span
lang=EN-US> 5개의 카메라를 가지고 있는 예제입니다. 이 카메라 매니저 클래스는 단순하게 상, 하, 좌, 우, 전방, 후방을 담당하는
데 전방 카메라를 메인 카메라로 설정해서 연출하도록 구성했습니다.</span></span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span style=''>카메라의 데이터를 갱신하는 코드는 다음과 같습니다<span
lang=EN-US>.</span></span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:blue'>INT</span><span lang=EN-US
style=';color:black'> </span><span lang=EN-US style='color:blue'>CMcCamManager</span><span lang=EN-US style=';
color:black'>::</span><span lang=EN-US style=';color:#880000'>FrameMove</span><span
lang=EN-US style=';color:black'>()</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>{</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:#A000A0'>SAFE_FRMOV</span><span
lang=EN-US style=';color:black'>(&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>m_pCam0</span><span lang=EN-US
style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; );</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>m_pCam0</span><span lang=EN-US
style=';color:black'>-&gt;</span><span lang=EN-US
style=';color:#880000'>UpdateViewProj</span><span lang=EN-US
style=';color:black'>();</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:blue'>D3DXVECTOR3</span><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>vcEye</span><span lang=EN-US
style=';color:black'>&nbsp;&nbsp; = </span><span lang=EN-US
style=';color:gray'>m_pCam0</span><span lang=EN-US
style=';color:black'>-&gt;</span><span lang=EN-US
style=';color:#880000'>GetEye</span><span lang=EN-US
style=';color:black'>();</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:blue'>D3DXVECTOR3</span><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>vcLook</span><span lang=EN-US
style=';color:black'>&nbsp; = </span><span lang=EN-US
style=';color:gray'>m_pCam0</span><span lang=EN-US
style=';color:black'>-&gt;</span><span lang=EN-US
style=';color:#880000'>GetLook</span><span lang=EN-US
style=';color:black'>();</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:blue'>D3DXVECTOR3</span><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>vcUp</span><span lang=EN-US
style=';color:black'>&nbsp;&nbsp;&nbsp; = </span><span
lang=EN-US style=';color:gray'>m_pCam0</span><span lang=EN-US
style=';color:black'>-&gt;</span><span lang=EN-US
style=';color:#880000'>GetUP</span><span lang=EN-US
style=';color:black'>();</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:blue'>D3DXVECTOR3</span><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>vcAxisX</span><span lang=EN-US
style=';color:black'> = </span><span lang=EN-US
style=';color:gray'>m_pCam0</span><span lang=EN-US
style=';color:black'>-&gt;</span><span lang=EN-US
style=';color:#880000'>GetAxisX</span><span lang=EN-US
style=';color:black'>();</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:blue'>D3DXVECTOR3</span><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>vcAxisY</span><span lang=EN-US
style=';color:black'> = </span><span lang=EN-US
style=';color:gray'>m_pCam0</span><span lang=EN-US
style=';color:black'>-&gt;</span><span lang=EN-US
style=';color:#880000'>GetAxisY</span><span lang=EN-US
style=';color:black'>();</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:blue'>D3DXVECTOR3</span><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>vcAxisZ</span><span lang=EN-US
style=';color:black'> = </span><span lang=EN-US
style=';color:gray'>m_pCam0</span><span lang=EN-US
style=';color:black'>-&gt;</span><span lang=EN-US
style=';color:#880000'>GetAxisZ</span><span lang=EN-US
style=';color:black'>();</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>m_pCam1</span><span lang=EN-US
style=';color:black'>-&gt;</span><span lang=EN-US
style=';color:#880000'>SetParamView</span><span lang=EN-US
style=';color:black'>(</span><span lang=EN-US style='color:gray'>vcEye</span><span lang=EN-US style=';color:black'>,
</span><span lang=EN-US style=';color:gray'>vcEye</span><span
lang=EN-US style=';color:black'> - </span><span lang=EN-US
style=';color:red'>100.f</span><span lang=EN-US
style=';color:black'> * </span><span lang=EN-US
style=';color:gray'>vcAxisX</span><span lang=EN-US
style=';color:black'>,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:blue'>D3DXVECTOR3</span><span
lang=EN-US style=';color:black'>(</span><span lang=EN-US
style=';color:red'>0</span><span lang=EN-US style='color:black'>,</span><span lang=EN-US style=';color:red'>1</span><span
lang=EN-US style=';color:black'>,</span><span lang=EN-US
style=';color:red'>0</span><span lang=EN-US style='color:black'>));</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>m_pCam2</span><span lang=EN-US
style=';color:black'>-&gt;</span><span lang=EN-US
style=';color:#880000'>SetParamView</span><span lang=EN-US
style=';color:black'>(</span><span lang=EN-US style='color:gray'>vcEye</span><span lang=EN-US style=';color:black'>,
</span><span lang=EN-US style=';color:gray'>vcEye</span><span
lang=EN-US style=';color:black'> + </span><span lang=EN-US
style=';color:red'>100.f</span><span lang=EN-US
style=';color:black'> * </span><span lang=EN-US
style=';color:gray'>vcAxisX</span><span lang=EN-US
style=';color:black'>,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:blue'>D3DXVECTOR3</span><span
lang=EN-US style=';color:black'>(</span><span lang=EN-US
style=';color:red'>0</span><span lang=EN-US style='color:black'>,</span><span lang=EN-US style=';color:red'>1</span><span
lang=EN-US style=';color:black'>,</span><span lang=EN-US
style=';color:red'>0</span><span lang=EN-US style='color:black'>));</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>m_pCam3</span><span lang=EN-US
style=';color:black'>-&gt;</span><span lang=EN-US
style=';color:#880000'>SetParamView</span><span lang=EN-US
style=';color:black'>(</span><span lang=EN-US style='color:gray'>vcEye</span><span lang=EN-US style=';color:black'>
+ </span><span lang=EN-US style=';color:red'>300.f</span><span
lang=EN-US style=';color:black'> * </span><span lang=EN-US
style=';color:gray'>vcAxisY</span><span lang=EN-US
style=';color:black'>, </span><span lang=EN-US style='color:gray'>vcEye</span><span lang=EN-US style=';color:black'>,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>vcUp</span><span lang=EN-US
style=';color:black'>);</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>m_pCam4</span><span lang=EN-US
style=';color:black'>-&gt;</span><span lang=EN-US
style=';color:#880000'>SetParamView</span><span lang=EN-US
style=';color:black'>(</span><span lang=EN-US style='color:gray'>vcEye</span><span lang=EN-US style=';color:black'>,
</span><span lang=EN-US style=';color:gray'>vcEye</span><span
lang=EN-US style=';color:black'> - </span><span lang=EN-US
style=';color:red'>100.f</span><span lang=EN-US
style=';color:black'> * </span><span lang=EN-US
style=';color:gray'>vcAxisZ</span><span lang=EN-US
style=';color:black'>,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:blue'>D3DXVECTOR3</span><span
lang=EN-US style=';color:black'>(</span><span lang=EN-US
style=';color:red'>0</span><span lang=EN-US style='color:black'>,</span><span lang=EN-US style=';color:red'>1</span><span
lang=EN-US style=';color:black'>,</span><span lang=EN-US
style=';color:red'>0</span><span lang=EN-US style='color:black'>));</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>m_pCam1</span><span lang=EN-US
style=';color:black'>-&gt;</span><span lang=EN-US
style=';color:#880000'>UpdateViewProj</span><span lang=EN-US
style=';color:black'>();</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>m_pCam2</span><span lang=EN-US
style=';color:black'>-&gt;</span><span lang=EN-US
style=';color:#880000'>UpdateViewProj</span><span lang=EN-US
style=';color:black'>();</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>m_pCam3</span><span lang=EN-US
style=';color:black'>-&gt;</span><span lang=EN-US
style=';color:#880000'>UpdateViewProj</span><span lang=EN-US
style=';color:black'>();</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>m_pCam4</span><span lang=EN-US
style=';color:black'>-&gt;</span><span lang=EN-US
style=';color:#880000'>UpdateViewProj</span><span lang=EN-US
style=';color:black'>();</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:blue'>return</span><span lang=EN-US
style=';color:black'> </span><span lang=EN-US style='color:red'>0</span><span lang=EN-US style=';color:black'>;</span></p>

<p class=MsoNormal><span lang=EN-US style=';color:black'>}</span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span style=''>이렇게 다중 카메라를 만들고<span
lang=EN-US>, 운영이 된다면 이들이 정상으로 작동하는지 디바이스의 Rendering Target을 변경해 가면서 확인할 수 있도록 코드를
다음과 같이 작성합니다.</span></span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:blue'>HRESULT</span><span lang=EN-US
style=';color:black'> </span><span lang=EN-US style='color:blue'>CMain</span><span lang=EN-US style=';color:black'>::</span><span
lang=EN-US style=';color:#880000'>FrameMove</span><span
lang=EN-US style=';color:black'>()</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>{</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:#A000A0'>SAFE_FRMOV</span><span
lang=EN-US style=';color:black'>(&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>m_pInput</span><span lang=EN-US
style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; );</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:#A000A0'>SAFE_FRMOV</span><span
lang=EN-US style=';color:black'>(&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>m_pCamMn</span><span lang=EN-US
style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; );</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:#A000A0'>SAFE_FRMOV</span><span
lang=EN-US style=';color:black'>(&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>m_pField</span><span lang=EN-US
style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; );</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:blue'>RECT</span><span lang=EN-US
style=';color:black'> </span><span lang=EN-US style='color:gray'>rc</span><span lang=EN-US style=';color:black'>
={</span><span lang=EN-US style=';color:red'>0</span><span
lang=EN-US style=';color:black'>,</span><span lang=EN-US
style=';color:red'>0</span><span lang=EN-US style='color:black'>, </span><span lang=EN-US style=';color:gray'>m_iTxW</span><span
lang=EN-US style=';color:black'>, </span><span lang=EN-US
style=';color:red'>30</span><span lang=EN-US style='color:black'>};</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>m_pd3dDevice</span><span
lang=EN-US style=';color:black'>-&gt;</span><span lang=EN-US
style=';color:#880000'>SetRenderTarget</span><span lang=EN-US
style=';color:black'>(</span><span lang=EN-US style='color:red'>0</span><span lang=EN-US style=';color:black'>,</span><span
lang=EN-US style=';color:gray'>m_RndSf</span><span lang=EN-US
style=';color:black'>[</span><span lang=EN-US style='color:red'>0</span><span lang=EN-US style=';color:black'>].</span><span
lang=EN-US style=';color:gray'>pSf</span><span lang=EN-US
style=';color:black'>);</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>m_pd3dDevice</span><span
lang=EN-US style=';color:black'>-&gt;</span><span lang=EN-US
style=';color:#880000'>Clear</span><span lang=EN-US
style=';color:black'>( </span><span lang=EN-US style='color:red'>0L</span><span lang=EN-US style=';color:black'>, </span><span
lang=EN-US style=';color:#A000A0'>NULL</span></p>

<p class=MsoNormal align=left style='margin-left:120.0pt;text-align:left;
text-indent:40.0pt;word-break:keep-all'><span lang=EN-US style='color:black'>, </span><span lang=EN-US style=';color:#A000A0'>D3DCLEAR_TARGET</span><span
lang=EN-US style=';color:black'>| </span><span lang=EN-US
style=';color:#A000A0'>D3DCLEAR_ZBUFFER</span></p>

<p class=MsoNormal align=left style='margin-left:120.0pt;text-align:left;
text-indent:40.0pt;word-break:keep-all'><span lang=EN-US style='color:black'>, </span><span lang=EN-US style=';color:red'>0x00006699</span><span
lang=EN-US style=';color:black'>, </span><span lang=EN-US
style=';color:red'>1.0f</span><span lang=EN-US style='color:black'>, </span><span lang=EN-US style=';color:red'>0L</span><span
lang=EN-US style=';color:black'> );</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>m_pCamMn</span><span lang=EN-US
style=';color:black'>-&gt;</span><span lang=EN-US
style=';color:gray'>m_pCam1</span><span lang=EN-US
style=';color:black'>-&gt;</span><span lang=EN-US
style=';color:#880000'>SetTransformViw</span><span lang=EN-US
style=';color:black'>();</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>m_pCamMn</span><span lang=EN-US
style=';color:black'>-&gt;</span><span lang=EN-US
style=';color:gray'>m_pCam1</span><span lang=EN-US
style=';color:black'>-&gt;</span><span lang=EN-US
style=';color:#880000'>SetTransformPrj</span><span lang=EN-US
style=';color:black'>();</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:#A000A0'>SAFE_RENDER</span><span
lang=EN-US style=';color:black'>(&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>m_pField</span><span lang=EN-US
style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; );</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>m_pD3DXFont</span><span
lang=EN-US style=';color:black'>-&gt;</span><span lang=EN-US
style=';color:#A000A0'>DrawText</span><span lang=EN-US
style=';color:black'>(</span><span lang=EN-US style='color:#A000A0'>NULL</span><span lang=EN-US style=';
color:black'>, </span><span lang=EN-US style=';color:fuchsia'>&quot;Left
Camera&quot;</span><span lang=EN-US style=';color:black'>, -</span><span
lang=EN-US style=';color:red'>1</span><span lang=EN-US
style=';color:black'>, &amp;</span><span lang=EN-US
style=';color:gray'>rc</span><span lang=EN-US style='color:black'>, </span><span lang=EN-US style=';color:red'>0</span><span
lang=EN-US style=';color:black'>, </span><span lang=EN-US
style=';color:blue'>D3DXCOLOR</span><span lang=EN-US
style=';color:black'>(</span><span lang=EN-US style='color:red'>1</span><span lang=EN-US style=';color:black'>,</span><span
lang=EN-US style=';color:red'>1</span><span lang=EN-US
style=';color:black'>,</span><span lang=EN-US style='color:red'>1</span><span lang=EN-US style=';color:black'>,</span><span
lang=EN-US style=';color:red'>1</span><span lang=EN-US
style=';color:black'>));</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>m_pd3dDevice</span><span
lang=EN-US style=';color:black'>-&gt;</span><span lang=EN-US
style=';color:#880000'>SetRenderTarget</span><span lang=EN-US
style=';color:black'>(</span><span lang=EN-US style='color:red'>0</span><span lang=EN-US style=';color:black'>,</span><span
lang=EN-US style=';color:gray'>m_RndSf</span><span lang=EN-US
style=';color:black'>[</span><span lang=EN-US style='color:red'>1</span><span lang=EN-US style=';color:black'>].</span><span
lang=EN-US style=';color:gray'>pSf</span><span lang=EN-US
style=';color:black'>);</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>m_pd3dDevice</span><span
lang=EN-US style=';color:black'>-&gt;</span><span lang=EN-US
style=';color:#880000'>Clear</span><span lang=EN-US
style=';color:black'>( </span><span lang=EN-US style='color:red'>0L</span><span lang=EN-US style=';color:black'>, </span><span
lang=EN-US style=';color:#A000A0'>NULL</span></p>

<p class=MsoNormal align=left style='margin-left:120.0pt;text-align:left;
text-indent:40.0pt;word-break:keep-all'><span lang=EN-US style='color:black'>, </span><span lang=EN-US style=';color:#A000A0'>D3DCLEAR_TARGET</span><span
lang=EN-US style=';color:black'>| </span><span lang=EN-US
style=';color:#A000A0'>D3DCLEAR_ZBUFFER</span></p>

<p class=MsoNormal align=left style='margin-left:120.0pt;text-align:left;
text-indent:40.0pt;word-break:keep-all'><span lang=EN-US style='color:black'>, </span><span lang=EN-US style=';color:red'>0x00006699</span><span
lang=EN-US style=';color:black'>, </span><span lang=EN-US
style=';color:red'>1.0f</span><span lang=EN-US style='color:black'>, </span><span lang=EN-US style=';color:red'>0L</span><span
lang=EN-US style=';color:black'> );</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>m_pCamMn</span><span lang=EN-US
style=';color:black'>-&gt;</span><span lang=EN-US
style=';color:gray'>m_pCam2</span><span lang=EN-US
style=';color:black'>-&gt;</span><span lang=EN-US
style=';color:#880000'>SetTransformViw</span><span lang=EN-US
style=';color:black'>();</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>m_pCamMn</span><span lang=EN-US
style=';color:black'>-&gt;</span><span lang=EN-US
style=';color:gray'>m_pCam2</span><span lang=EN-US
style=';color:black'>-&gt;</span><span lang=EN-US
style=';color:#880000'>SetTransformPrj</span><span lang=EN-US
style=';color:black'>();</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:#A000A0'>SAFE_RENDER</span><span
lang=EN-US style=';color:black'>(&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>m_pField</span><span lang=EN-US
style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; );</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>m_pD3DXFont</span><span
lang=EN-US style=';color:black'>-&gt;</span><span lang=EN-US
style=';color:#A000A0'>DrawText</span><span lang=EN-US
style=';color:black'>(</span><span lang=EN-US style='color:#A000A0'>NULL</span><span lang=EN-US style=';
color:black'>, </span><span lang=EN-US style=';color:fuchsia'>&quot;Right
Camera&quot;</span><span lang=EN-US style=';color:black'>, -</span><span
lang=EN-US style=';color:red'>1</span><span lang=EN-US
style=';color:black'>, &amp;</span><span lang=EN-US
style=';color:gray'>rc</span><span lang=EN-US style='color:black'>, </span><span lang=EN-US style=';color:red'>0</span><span
lang=EN-US style=';color:black'>, </span><span lang=EN-US
style=';color:blue'>D3DXCOLOR</span><span lang=EN-US
style=';color:black'>(</span><span lang=EN-US style='color:red'>1</span><span lang=EN-US style=';color:black'>,</span><span
lang=EN-US style=';color:red'>1</span><span lang=EN-US
style=';color:black'>,</span><span lang=EN-US style='color:red'>1</span><span lang=EN-US style=';color:black'>,</span><span
lang=EN-US style=';color:red'>1</span><span lang=EN-US
style=';color:black'>));</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>m_pd3dDevice</span><span
lang=EN-US style=';color:black'>-&gt;</span><span lang=EN-US
style=';color:#880000'>SetRenderTarget</span><span lang=EN-US
style=';color:black'>(</span><span lang=EN-US style='color:red'>0</span><span lang=EN-US style=';color:black'>,</span><span
lang=EN-US style=';color:gray'>m_RndSf</span><span lang=EN-US
style=';color:black'>[</span><span lang=EN-US style='color:red'>2</span><span lang=EN-US style=';color:black'>].</span><span
lang=EN-US style=';color:gray'>pSf</span><span lang=EN-US
style=';color:black'>);</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>m_pd3dDevice</span><span
lang=EN-US style=';color:black'>-&gt;</span><span lang=EN-US
style=';color:#880000'>Clear</span><span lang=EN-US
style=';color:black'>( </span><span lang=EN-US style='color:red'>0L</span><span lang=EN-US style=';color:black'>, </span><span
lang=EN-US style=';color:#A000A0'>NULL</span></p>

<p class=MsoNormal align=left style='margin-left:120.0pt;text-align:left;
text-indent:40.0pt;word-break:keep-all'><span lang=EN-US style='color:black'>, </span><span lang=EN-US style=';color:#A000A0'>D3DCLEAR_TARGET</span><span
lang=EN-US style=';color:black'>| </span><span lang=EN-US
style=';color:#A000A0'>D3DCLEAR_ZBUFFER</span></p>

<p class=MsoNormal align=left style='margin-left:120.0pt;text-align:left;
text-indent:40.0pt;word-break:keep-all'><span lang=EN-US style='color:black'>, </span><span lang=EN-US style=';color:red'>0x00006699</span><span
lang=EN-US style=';color:black'>, </span><span lang=EN-US
style=';color:red'>1.0f</span><span lang=EN-US style='color:black'>, </span><span lang=EN-US style=';color:red'>0L</span><span
lang=EN-US style=';color:black'> );</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>m_pCamMn</span><span lang=EN-US
style=';color:black'>-&gt;</span><span lang=EN-US
style=';color:gray'>m_pCam3</span><span lang=EN-US
style=';color:black'>-&gt;</span><span lang=EN-US
style=';color:#880000'>SetTransformViw</span><span lang=EN-US
style=';color:black'>();</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>m_pCamMn</span><span lang=EN-US
style=';color:black'>-&gt;</span><span lang=EN-US
style=';color:gray'>m_pCam3</span><span lang=EN-US
style=';color:black'>-&gt;</span><span lang=EN-US
style=';color:#880000'>SetTransformPrj</span><span lang=EN-US
style=';color:black'>();</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:#A000A0'>SAFE_RENDER</span><span
lang=EN-US style=';color:black'>(&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>m_pField</span><span lang=EN-US
style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; );</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>m_pD3DXFont</span><span
lang=EN-US style=';color:black'>-&gt;</span><span lang=EN-US
style=';color:#A000A0'>DrawText</span><span lang=EN-US
style=';color:black'>(</span><span lang=EN-US style='color:#A000A0'>NULL</span><span lang=EN-US style=';
color:black'>, </span><span lang=EN-US style=';color:fuchsia'>&quot;Top
Camera&quot;</span><span lang=EN-US style=';color:black'>, -</span><span
lang=EN-US style=';color:red'>1</span><span lang=EN-US
style=';color:black'>, &amp;</span><span lang=EN-US
style=';color:gray'>rc</span><span lang=EN-US style='color:black'>, </span><span lang=EN-US style=';color:red'>0</span><span
lang=EN-US style=';color:black'>, </span><span lang=EN-US
style=';color:blue'>D3DXCOLOR</span><span lang=EN-US
style=';color:black'>(</span><span lang=EN-US style='color:red'>1</span><span lang=EN-US style=';color:black'>,</span><span
lang=EN-US style=';color:red'>1</span><span lang=EN-US
style=';color:black'>,</span><span lang=EN-US style='color:red'>1</span><span lang=EN-US style=';color:black'>,</span><span
lang=EN-US style=';color:red'>1</span><span lang=EN-US
style=';color:black'>));</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>m_pd3dDevice</span><span
lang=EN-US style=';color:black'>-&gt;</span><span lang=EN-US
style=';color:#880000'>SetRenderTarget</span><span lang=EN-US
style=';color:black'>(</span><span lang=EN-US style='color:red'>0</span><span lang=EN-US style=';color:black'>,</span><span
lang=EN-US style=';color:gray'>m_RndSf</span><span lang=EN-US
style=';color:black'>[</span><span lang=EN-US style='color:red'>3</span><span lang=EN-US style=';color:black'>].</span><span
lang=EN-US style=';color:gray'>pSf</span><span lang=EN-US
style=';color:black'>);</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>m_pd3dDevice</span><span
lang=EN-US style=';color:black'>-&gt;</span><span lang=EN-US
style=';color:#880000'>Clear</span><span lang=EN-US
style=';color:black'>( </span><span lang=EN-US style='color:red'>0L</span><span lang=EN-US style=';color:black'>, </span><span
lang=EN-US style=';color:#A000A0'>NULL</span></p>

<p class=MsoNormal align=left style='margin-left:120.0pt;text-align:left;
text-indent:40.0pt;word-break:keep-all'><span lang=EN-US style='color:black'>, </span><span lang=EN-US style=';color:#A000A0'>D3DCLEAR_TARGET</span><span
lang=EN-US style=';color:black'>| </span><span lang=EN-US
style=';color:#A000A0'>D3DCLEAR_ZBUFFER</span></p>

<p class=MsoNormal align=left style='margin-left:120.0pt;text-align:left;
text-indent:40.0pt;word-break:keep-all'><span lang=EN-US style='color:black'>, </span><span lang=EN-US style=';color:red'>0x00006699</span><span
lang=EN-US style=';color:black'>, </span><span lang=EN-US
style=';color:red'>1.0f</span><span lang=EN-US style='color:black'>, </span><span lang=EN-US style=';color:red'>0L</span><span
lang=EN-US style=';color:black'> );</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>m_pCamMn</span><span lang=EN-US
style=';color:black'>-&gt;</span><span lang=EN-US
style=';color:gray'>m_pCam4</span><span lang=EN-US
style=';color:black'>-&gt;</span><span lang=EN-US
style=';color:#880000'>SetTransformViw</span><span lang=EN-US
style=';color:black'>();</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>m_pCamMn</span><span lang=EN-US
style=';color:black'>-&gt;</span><span lang=EN-US
style=';color:gray'>m_pCam4</span><span lang=EN-US
style=';color:black'>-&gt;</span><span lang=EN-US
style=';color:#880000'>SetTransformPrj</span><span lang=EN-US
style=';color:black'>();</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:#A000A0'>SAFE_RENDER</span><span
lang=EN-US style=';color:black'>(&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>m_pField</span><span lang=EN-US
style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; );</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>m_pD3DXFont</span><span
lang=EN-US style=';color:black'>-&gt;</span><span lang=EN-US
style=';color:#A000A0'>DrawText</span><span lang=EN-US
style=';color:black'>(</span><span lang=EN-US style='color:#A000A0'>NULL</span><span lang=EN-US style=';
color:black'>, </span><span lang=EN-US style=';color:fuchsia'>&quot;Back
Camera&quot;</span><span lang=EN-US style=';color:black'>, -</span><span
lang=EN-US style=';color:red'>1</span><span lang=EN-US
style=';color:black'>, &amp;</span><span lang=EN-US
style=';color:gray'>rc</span><span lang=EN-US style='color:black'>, </span><span lang=EN-US style=';color:red'>0</span><span
lang=EN-US style=';color:black'>, </span><span lang=EN-US
style=';color:blue'>D3DXCOLOR</span><span lang=EN-US
style=';color:black'>(</span><span lang=EN-US style='color:red'>1</span><span lang=EN-US style=';color:black'>,</span><span
lang=EN-US style=';color:red'>1</span><span lang=EN-US
style=';color:black'>,</span><span lang=EN-US style='color:red'>1</span><span lang=EN-US style=';color:black'>,</span><span
lang=EN-US style=';color:red'>1</span><span lang=EN-US
style=';color:black'>));</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>m_pd3dDevice</span><span
lang=EN-US style=';color:black'>-&gt;</span><span lang=EN-US
style=';color:#880000'>SetRenderTarget</span><span lang=EN-US
style=';color:black'>(</span><span lang=EN-US style='color:red'>0</span><span lang=EN-US style=';color:black'>,</span><span
lang=EN-US style=';color:gray'>m_pCurBck</span><span lang=EN-US
style=';color:black'>);&nbsp; </span><span lang=EN-US
style=';color:green'>//렌더 타깃을 원래대로.</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:gray'>m_pd3dDevice</span><span
lang=EN-US style=';color:black'>-&gt;</span><span lang=EN-US
style=';color:#880000'>SetDepthStencilSurface</span><span
lang=EN-US style=';color:black'>(</span><span lang=EN-US
style=';color:gray'>m_pCurDpt</span><span lang=EN-US
style=';color:black'>);</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='text-align:left;word-break:keep-all'><span
lang=EN-US style=';color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style=';color:blue'>return</span><span lang=EN-US
style=';color:black'> </span><span lang=EN-US style='color:#A000A0'>S_OK</span><span lang=EN-US style=';
color:black'>;</span></p>

<p class=MsoNormal><span lang=EN-US style=';color:black'>}</span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span><img border=0
width=300 height=225 src="https://github.com/3dapi/ef01_camera/raw/master/index.files/image045.jpg"></span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span style=''>전체 코드는 다음 예제를 이용하기 바랍니다<span
lang=EN-US>.</span></span></p>

<p class=MsoNormal><span>&nbsp;</span></p>

<p class=MsoNormal><span><a
href="https://github.com/3dapi/ef01_camera/raw/master/cam32_Multi_cam.zip">cam32_Multi_cam.zip</a></span></p>

</div>

<?php
	include '../base/lc_tail.php';
?>
